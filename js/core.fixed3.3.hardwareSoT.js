

/* ===== extracted from kc_v33_step8_fixed_final_FIXED5.html ===== */


// ===== STEP 8 (budget MVP) calc object — must be defined EARLY (avoid TDZ if any init crashes) =====
// ===== STEP 8 (budget MVP) calc object — define EARLY + merge defaults safely =====
/* ===== STEP 8 CALC bootstrap (safe) ===== */
(function initCALC() {
    const defaults = {
        mode: "client",

        sheet: { w: 2800, h: 2070 },

        hardwarePctByComfort: { econ: 0.10, standard: 0.12, premium: 0.15 },

        presets: {
            econ: {
                label: "Економ",
                corpSheetPrice: 2200,
                facadeM2Price: 2800,
                topM2Price: 3500,
                backSheetPrice: 700,
                addonsPack: 8000,
                wasteSheetPct: 0.12,
                wasteTopPct: 0.08,
                servicesPct: 0.18
            },
            standard: {
                label: "Стандарт",
                corpSheetPrice: 2600,
                facadeM2Price: 3500,
                topM2Price: 4500,
                backSheetPrice: 850,
                addonsPack: 12000,
                wasteSheetPct: 0.12,
                wasteTopPct: 0.08,
                servicesPct: 0.18
            },
            premium: {
                label: "Преміум",
                corpSheetPrice: 3200,
                facadeM2Price: 4800,
                topM2Price: 6500,
                backSheetPrice: 1100,
                addonsPack: 18000,
                wasteSheetPct: 0.12,
                wasteTopPct: 0.08,
                servicesPct: 0.20
            }
        },

        modePresets: {
            client: { k: 1.00, label: "Клієнт" },
            manager: { k: 1.15, label: "Менеджер" }
        },

        base: {
            pack: { econ: 1.00, standard: 1.25, premium: 1.55 },
            comfort: { econ: 1.00, standard: 1.18, premium: 1.35 }
        }
    };

    // normalize root
    const existingRoot =
        (window.CALC && typeof window.CALC === "object") ? window.CALC : {};

    // normalize nested objects (protect against null / wrong types)
    const existingSheet =
        (existingRoot.sheet && typeof existingRoot.sheet === "object") ? existingRoot.sheet : {};
    const existingHardware =
        (existingRoot.hardwarePctByComfort && typeof existingRoot.hardwarePctByComfort === "object")
            ? existingRoot.hardwarePctByComfort : {};
    const existingPresets =
        (existingRoot.presets && typeof existingRoot.presets === "object") ? existingRoot.presets : {};
    const existingModePresets =
        (existingRoot.modePresets && typeof existingRoot.modePresets === "object")
            ? existingRoot.modePresets : {};
    const existingBase =
        (existingRoot.base && typeof existingRoot.base === "object") ? existingRoot.base : {};

    window.CALC = {
        ...defaults,
        ...existingRoot,
        sheet: { ...defaults.sheet, ...existingSheet },
        hardwarePctByComfort: { ...defaults.hardwarePctByComfort, ...existingHardware },
        presets: { ...defaults.presets, ...existingPresets },
        modePresets: { ...defaults.modePresets, ...existingModePresets },
        base: { ...defaults.base, ...existingBase }
    };

    // Dynamic getter (always актуальна)
    try {
        Object.defineProperty(window.CALC.sheet, "area_m2", {
            get() {
                return (Number(this.w) * Number(this.h)) / 1e6;
            },
            configurable: true
        });
    } catch (e) {
        // fallback (if somebody locked property earlier)
        window.CALC.sheet.area_m2 = (Number(window.CALC.sheet.w) * Number(window.CALC.sheet.h)) / 1e6;
    }
})();

const CALC = window.CALC; // single alias (NO duplicates)
/* ===== END STEP 8 CALC bootstrap ===== */


const LS_KEY = "KITCHEN_CONF_V1_STATE";
const STATE_VERSION = 2; // bump when state schema changes

// ===== STEP 2: схема-рисунок (вбудовані WebP, щоб файл був самодостатній) =====
var SCHEME_IMAGES = window.SCHEME_IMAGES || (window.SCHEME_IMAGES = {
    straight: "data:image/webp;base64,UklGRkwvAABXRUJQVlA4IEAvAAAQ6ACdASoAAwACPikUiEMhoSEQagSEGAKEs7d8E/rt7caQE1VaJIBIf3Ud3A9o/JPxHnXcs9rPkzyZ8w9xp4B+c8mjzH8t/x/9Y/wH7BfQb/e/5v+w+5z9Ff7X3AP1A/6H92/znwa9JP9T/2//X/Zn4A/xj+i/73+5fv/8yX+d/3/+j9wv9T/tH/H/wfwAfyf+u/7z89/jK9i3+0/8P//+4V/L/7z/3vXA/af4Vf2t/bb4GP6F/c//P+f/yAegB/6uvf4q/hv5w/sP+O/oH+PfUf238eP71/sv9l+GGDv7f+w/2voj/Nvtz9I/sv7L/2/9kfvr93/5AfiT7o/Ij+p/KP4C/xb+U/zv+r/r7/bv/N/wvrU1AeZbr37h+oX6m/LP7f/cv2j/u3ymfieaH15/t/47f0D7AP5J/Kv7R/Zf2b/tP/0+xf+X/vPMa+4f8z9XPgF/jf9D/0v9u/cv/L//////kV/Zf9H/LfvH/rvgb8/f7r/E/vV/pfsJ/kf9A/yH99/cb/G////3fd37Bv3O9lL9g//+Ggk4lxLiXEuJcS4lxLiXEuJcS4lxLiXEuJcS4lxLiXEuJcS4lxLiXEuJcS4lxLiXEuJcS4lxLiXEuJcS4lxLiXEuJcS4lxLiXEuJcS4lxLiXEuJcS4lxLiXEuJcS4lxLiXEuJcS4lxLiXEuJcS4lxLiXEuJcS4lxLiXEuJcS4lxLiXEuJcS4lxLiXEuJcS4lxLiXEuJcS4lxLiXEs9dIx5uo7X7ktxyARI3G5yblQobfKhXn7oy66VHAX1TxlXrZxyVFxdiB72kTaceNaS+2hVdXAGC3dByjx7WLSxDmt3BGRuOWGDOMAe/C/7ILjP5D4xV8byc1DsuMJfndS+twdpCJDjE8F2ICPvzagDDxLP25Jg1sEJgQeWuFW8jrMh29O6iothob9vEovtaorfZ9hdjrV4rGii16qCvnuTFi+2+uUbiwzusyxXMgT+gO3Cg3t6I/lxDqNRFLkHVZflYoJj0vTKeVHS6U3xQF49mPoBtjK53dS9ANsZPHSsN0qr5Olx16hBrEuJZ/8p0Y7HgRZ5WlV7T/UdgKJn/mRF30ezd+v0tc3sWsOwyMpuLvXrIL9xHaorro21H+GwzzdTF21dKd3D7BzsOf4CN+HMs4ByVkSaxkH0pvsvD5KkTRB6lUL4z4HQOXNFYSZ/8mUqy7dDEKxh/fSx3XkesN5LdeszgOE46ux8Ez4cDxlhGM8BbEy9ENalsK0ot5emfAVeTsYSGV+jSG1CG74SH/RebQF6Ak8FYUiBuQOgYricDOMOjhpamZZhjNcjQj3wNlOTlELstXcaY5qqcx5F7UhhmdeJ/smFHbiz4dPQ7OcVEootZafK3MrRScEhRWYhgzQFxf1T3nkE1sQP+A/Kc0x0y5aTxqj6pJiS6M07EVMO5RjCR0dlBcE1k1/f9c6h34tmXXEBljw6k4R9A0kZgwC73s4+dwhbyooGriy36JqGWSJ7bjQp5vKeUw3urxcWEWFXnxrfNVEJjrVnKHrajrzHDlDJznJk6pMgdAx3hywUj/L53ueP3q7L4h1WgyKHsBf84nF6qPtstEVYEJ0nS4moKaUV+rGRJEEsAu/jL17OTA+79BoDrBOYv7hwTeHwTD7Dom8851Zl66zpWX4ozDz1uO6PjWcMmxxKf/8Y9JWiYFAdEZusGsFsRhk51YWdBTQxIngxA8S4Od4FXnT3wMm3ku433dfyGQanXxhVjqliHkxJiTEmJMSwdkmJMSYkxJiTEmJMSYkxJiTEmJMSYkxJiTEmJMSYkxJiTEmJMSYkxJiTEmJMSYkxJiTEmJFhEmJMSYkxJiTEmJMSYkxJiTEmJMSYkxJiTEmJMSYkxJiTEmJMSYkxJiTEmJLwxhjDGGMMYYwxhi8cYLTbkDoGY1LJUtQwSWHO65Nybk3JGr4ShE+Tm4SDdfYsPcJpY1+ITiXEiaxgCOvr7AHiWlegpCihQTjouVGvz6aRiXeh1YUsa0zmBYSqgMKMYFFR1D+KWSpZKYtBzqEnq1FzDHF2JPQTAK8VVVacS7cITGHnClecOjpBnNiGwuNcBIGExMkapEBfIAk2//zNmVx0jqlMGStgtld+hPoJ4NuUqwShK6Ern+TdBugmuTHHanqfot8nbsNtwSguAhgjv/JLTfaIX9STT92bXVorateO9OgWFIDE4OP8lPTeCAILRO+Ynt6hXPihDeOO2BSQk/ybr2DdBNcmOO2BSQ1u+I+9TPj2BOcF6Ca5McdsWgpIaIpCT/Jug3XQE1yY47YFJCT/Jug3QTXJjjuSWFJDRFISf5N0G66AmuTHHbApISf5N0G6CjeuTHHbApISf5N0G6Ca5McdsCkhJ/k3QboKJ/mv8m6DdBNcmOO2BSQk/yboN0E1yY47YFJCW8/yboN0E1yY47YFJCT/Jug3QTXJjjtgUkJbz/Jug3QTXJjjtgUkJP8m6DdBNdQnjjtgUjwAD+/+lKQAAAAAAAAAAAAAAAAAaO33z9DKdDq0FHxNVSSENK60mRXD0Q6vx5+hID/CPgqoULrogqOChnfwfORBs8+RWmga0zHw2AGeRtKZkFVpU0dpmf+J8R5JfqYz7f2g0zQxIhHhkjKbpaWY+iCQ9huKo3ebGM2NZufsI4mlheuHEiVrGPX0qkpswOiV8ZqObhOsCRbhM3vHS4F41cXSjNptHjKfJrRalfHy6uhuUoDlS+FdtGKR7JjhSXunepkmJQxIOhObYrIxw48UxLxbg8+S2iZSys658Vn2yqIZB+7nwLcFDil47Iw1X23VO/RjvRT/vyvzvv560YsuNNQ4e4zfO/brXsg6CJ/cb+CeXK8EeN4pyA1ihyn6s7TCbXDprLkFHq/n/n/aE2Ld8xzBMy2qShcauJdaTCP30HJJ4p8u6v7+zGBryfOQ4YwuqJjw3KwZo/FDTpm+GWfO+TntX4gtimyyvq/N4IpAtofgvk3jf/h8wkagRFhfKN4vi5nlgUHBUPpScMb7Q+Idl5DtShbS97YAu2EAp9ExAXtWEu4N4npBYMWyGQVkLXM7EtfufCMkuPoGU/yz5B3KbWIb2v9GpsNH2P0AZq6fGJhO716wEQxblBxob9sLRAWYZRRyZgTgRdAQmJqGgFEO7UhzILsTfA4cTyC3eig3NTLKsy0MBNDpw3U1hhO/y/0mx8h8i3TM9vJBsc6YvXeAFSIx6nNLMHnQ/c8who033KizN1ix3sylxN1KB6XUgPNLgG4HCUWkjifkslTziI9PfGSoc88wBvg12knK3rjmk/RZdgTxqUEWTgpwMIufeLG/hOOxdz2VhSqxWAsWz/U1AQxV3oMCAlcrAPwJfymOSHZ9akE7dYsH5QniynAYDCebSwJdSvUAm5jlPphzFNXVaOaGgrxtQ3o41rVDhRSp6kwX/1lBhv2qZ6S823QmtshvxyJq1kzWqtTtqrmc4ZieHVHTEiq75voy/H2/j5O1RZhAY3Kx45nRvHku8nDQogK14Ut76S1YJXW5toL0uG2nkxsIeqj0bKVfGRFN9AZMj6wSGfSQXbJ09inzEMHPZSfUA5C3mlhnVz//CAfzPEdKzQurNgBPNjk1pftmbbFWSmAUIfq5wZvjry2USwhqAHRZ7VdcfnU6XGMFzvFgHujf1A30Z35WtvcGkmAe2DhVKvpsjDWiE7SX5oYiavWni9b+TxCVqfFX8qijiPfnLMcMx8gGAMAZhn/ALaS25JG7Re8TSUjIsDKWa5aSnPIBvFzCbqJuXZ2grhvqN2earKddxyXg8GkSuzWUfZcNT/kePTnF6rmLPnjIntuNB9mL3AfuWKD3YFsfgk3VVNL1oW/gxfzCaDFEp4jvlknR7o/wz7yWKZ3rQXcRCCymyWOYQtFlfPNbieq0ndgb9EMcnoII4Rdg5lYLeyvDHTJovkjfWwI40qV8hhLF8lYNMT5I+xVzXw+64guy85rLbRol6U/6sETtN5vgL5Ozt9NlxKzy7LByMqa4ErSIbKTQFQEr/Rn/wE2StLRePWMoMXEPde7hDhMJM7HBr8kL+IubqVFl1v9+BikxFdBbQTv27lFxmnYJRc2KzHT9Zzq72pweR8yqg11k0kWY/JrjLQYaVNk5PccrWSXsp++A5XOSCjsf7dXs028ZXJGaKka6/YACqHE4eK3VXF/RSx4ZN26JurvepYYhzkaqPM/oQhzsGlNkqZZPMK+sW7MG2xjHlybSih8EgXFd8ZoFEe7tdQO4KcP8sHJ713UbWexrLYkd1Q6qJ5/kz40fyblQbelMzhP7DeVHVFVJ43IB/DIhu9xEaCVqtKGWdgh+Z20GG8N8HPaN/Awauafuu5TCqVY0cuhgshxcV2tDLjK1ysc/grQuZynKyEZt9usQJuTf8hDObMyV2CVh4J3RxsN5uRoV6v9MDzhzOxu8ZkRh/vgXXoeG0KSxrZo8+/QG7qazIzhPeVb1Qipg0NeoFOZDVh0+2zWoGcLGxrxEcCF/y3hKtgygiUMucFJz+GlpNkq+ij52NdRLfVh0B+X7Qi06lFDU7azpZxsryk0qPJ6RG2AjlqRKH0hrsqsNMie13vtoUMRxMu3RvE7oBjkUeNNCJHXpFCaPvoryGj7ZYvfFKndnSkZRKUWpSqMZXoXpRwjNqZ4CJGabWf8gbnjIUrAQ3rP5/3YxwcEjA0meqoy1s0ObDki2vc1SPOAesWHtwFXpA5dqmzMQEh+F2o2H5Y66yNtVBCuEW4PBYMp0wrpPoGU/5ThslJM3GgBCnntfOSBF6jstCMoxvzHliobvOmeVUijZUibHW8+W6pLHu8PDO4jF6ZQne2syiPJd+O1k9L38h/RZit5Gzle0/VA6LhBF1U/AcFqSH7qMNqySxXPx7lmAk7IRmjfYjAmbGlGiAABkhYdKH0SK9pXmFmZQbiysZ6TMRoyTwRzf6gm2RaI/ItXs1RY1Tu7kGg69fSMsFcTxVFqM3P9+3agV5uHllh8793Cml6K2luT8pMLjtfpVi/aymTG41Qo4VltfmoliujIMtH/gz6tWGwd09UUh99w8D3MNc2jMCP8RRbBWdHXlGwFv/7aJc98/BeOHCEna++7TFbUyNS0hOgYIGdmqG1Gpkvq1hVopCu0wRbrfYO1lak+CwayGPfKptIL70kFtI68Zi4i67GHXt8CI/yIEVkCoi1nOH/mN1wLI8pdIlcYRjUXoO+hkAzXXttf/ItCB2LQ8dCpLdgOp0y9VKMuHhvxXT0zuqyKLEtBOxH0izNSdsq2CPBwU2Ja98Eq/sb7a1+KS3O/4Mx0kL3IVfSrvL8OT70vMSZR6/uI3o/eMo9/tCdnjkOj2AhZ+I+c4/DlUcPdQY8N9U3NZxiZgC1g0i1t9eUROy7qm4Wj8fdDJ0ZqFFeHybguJKsnkpqnU0ioBMawUyqSa00/6YayMccsxktC8fnBqQgV+PdGBCCAJkaMdWd5GuD0nvA8N8467p0bvylnTGS6a6KXTAH/PJtdkjxi0Ngl+alYcGc4ksLAYWtAz7nTyZ1EqPhRIop0sdRa283apXfqusOxHTCUZ3FsECymdCgrJhqDiArDPdUZ6K2wxS2ODEZ/Xsok807vCV93u23+v8dClcsGx4nTmHzrwKtNSYi6BzLyc+g0g6ES9uRBgq3lA2YDCMw2MjK1TxzcxBQ2VkEj7CJOxKTqf457VQK80/XhMnYwEOg/399hv5a1NdUkeDWudz280F539RmjehvdJo3Yhq8r47igiPnQuy8Gp4s86oArJPvvbn8lUaH+s0lBxvKmsh2FaNPMuuofCTKp7IMV6hmh0UDIhDp20PjFfi9kAseIXe43Zid1bUJPGLD8msy/n5syNGgB/kUNldDJX4JxJTqPuwaOxH0z1tAcRrVO9O/GkM/6psBztzIVUVeufG+YhVS6nBEBxihjRMld5qktIIP546wcLHu67eR+MGeauV/ydnKMckO8HxJr1Fc+ViBXWgZ7Jv7UzJFssM7D4s8Csrk9d5Xlta/bm8KaDApoUSBzxSiYpSFq88lY49WX6K3JtHLwEbFRNT3WoMaam5HkKBegiQ5j39VOOf3Na+7WEI6YcqNgLz/GPLMHpWe9mdtObSzcW4WZ3+3PPSjo0BEVjpuL6DapPSR8VuFvfee4DpcR7k6NuIn1oYFlcN5X23QHiGIjVZgfKr/ZvUXBym+YMjGsnxvqBBSawzOGmNRjmRzF0+bWKl/uUJU5SHXgmYx9tJG9yta3xydOfetx3X/QRIKJ/0EuwAdm7+t2SbtTW4+RgfDRzCO6snqHSHUCbhnqQYeWftOr1we/zTi81pcZVJzdzDeoYL8JVCv3OA0gH/7wZfTjH0ALn8REa4Dw99YzzkypsSOEAbonEJZ2IZrKDa5nOR/xIYt1cWjBuh0obhhTZkNZCtyisJy+3jMPRPzpEgQVy0JJ39+MKsV4qdTsfqKNKb9Y1mqlLuV4nSlVOAIX5GiwJHx0Ti8S5T/DAQdFlhQ91szqKYIbKVnTrd+MADIRZzh85mvp2NT/tLsQRApWYw1+PeWd0OaU9oTZS0rv+KX10eHt+CPX+nbawMCyxT1if4xXTQ/kD7BiqQ/nhabMv1Bsf1jqc4vkjOdP6w/sNcWwGi1Q6bct85Chup4rvs/qJh/EUQlSWj25U/jtL+6ruwTleKF5aikAWYIdNoR542gUismntarJvmwI18YZRhV8sGV2aeGwJHVsAmya1LS2/kIcyp8cwPq2Pakdny6c1qpOaexuuPLn3Ni9QjDRRmoBptnL+w5lh9JIVjyFUA6Z9SCvzBkyk+/uF9seJDmwxptSPswoSqpaG3P0jfrsYjGDoE/HNev6BtkBiWBOrkSwnNyEZFUP7xHrdf1/pG0kxXoWARnTWaVlfqb9MYiJ25q0fgYBa7+n786Ea3q+uDrqMlPY93KSDOYDr+PhRCPx6CZg1K1VHekqlS1QW2vnj7lIkXcNbl114P+NVfAPa1On6mTWF009dbRcPADwkORat9M9lnS6Lln3yuqiRc12tnbNRJzF06cce2c/7XMb8+Qf+E2FnrRKrxVla8RNGS+54wUvHDp1wCiUv+aQ/gFE88/7gIZOB6/V6E3WliZ+l5FHfQLZD2j5tof47SBqRm6dnc3fxf4lH6dvH/zs6B50xOzxRmPbE8cFrWY+5hoT5mxi9REYlx1h3tm0+drvyfXTlrWME9GO6aXbOD42PBe/ypx6bJ27g7BaF9D2bL1uKVWFI1rR6DOAyiXemOSs42lDjaYP4J/5dxx8yNNRoAXxcfqKDd1itC1wu3DBIK587idJPjUKD7R5lqKSu67vaC1Ge4r+jzEyQyfNbAU+5/9RGKVdJnlMssjW/XQBgXc81pQyQj0upGN3vwVBjvlmIGHUVcSSyuNogyBTX64MGnDEPPBdF3tDJbFawd8UEZu7gBtrB4NW5s5uatEWyT8fks4gcdyydFYO6C/YvvEvqNwq8Gn89bpurZS0BMQYfVHEg2W3CFo0axBMKta3kfBzRCPRuMvMN2jttlRv5w/S45hMmpdKyHBZ3L3R7hPc7OD5TptAwCWHRy41zH9Fe2FwnSYs3e5W1KpzQJGVXU0apr02W+aEgTYW/0/pJV3o7VnAwuVMKo19urX3nt2n/0vTQu4oYb2NoRiHuBZzEPP+cOw3hhFYz6zhD3bEJBllfS54Kfh1LSFa3JWtW+AXMrXBewH/Gz55uQnrSzPZn74EeOpb+m+7++mHJGpQUhF5DvtC3x6/79PA4Pmt5wtja4+w7JS2FMEkY2j+06fyYvZO5Ccc2Kzk4wo1n3N+svHyoLvOJ8IZmhuaYrm1j/EnpHteBA2LPJAv29ECkb+L9sOTHahwL8VNGZa9jUoKLQ4gjxhG4j/0FbT660HEY2zmnZaYfUncR9noNka7IhltSCtqRG4dLBIEdJ2AUdvWXO/aK9CwxPdpxlGprRj6F3EeMCmNNzj6rLA71wk2FdwXXJ3adRJ+xdWzA2BooIIpxnokPQ99lMAzd+OC8f8etm7QoctNu4jb4FD35QLlm0TiccoC9PCf2M8G23boizRksB8HBGNRp8B9B9xiTRr74CRVfOHLlvbsPQbZ2rRGEFDBhU+z6tdMVvgpWXPpfjIpWEH3NXREcw6J526gUit1HKUYY3yX/2YHv4UJpFYmjQGFv3Vsw4+Q4IalTWa1cNnagt8mPbH9qoJA4vS2CsSzcAY8pXlJI6cCeCuwZoiY5XYhEaBu7ZvNjdVkq0UW9N2PIpFltnQu9KiU4xk4AFPprqffaSnjzoL7I+JdBiCpsRizbo6Wyb1D1t06yG3jQF9D/jDoYCRvwELmHWeYGIUx+kltcsZ0sn8H9tB0kqEUQTeMGviYyyZKZRN9+gB2y5Yxm9jl2OT/lggNovL/hlCNMtD2Y1ugUXRoOOMIOWwpL4LofaxrLaWqWmJQjXs57/76N2jdT215pOINLaCQ082vIl32FyzEDZ8k4drEViOgUTUiafcq0CgbdbLFXUtKQ+HlA7kvtRoQPfa83AfK8G2TXrQFWkgRRPPXRoflxwcoqxp+dflelAS7/XcDIBMn1JUIpTNFjSn2mCpKv522/+2e23EMs84GCtLfR3NW969eR7nbDpfvHlkwxPV6O0uuBetYKPwudmWglE9MksPntMn9XcStPzgJdgTnRC6nz7PHuwvW+yFmepkA42pQ+fwowUfoDHtHhfs/reOcUTlUfdHsTJfcXmbgRwBdhYnD2pcxi6Q5eTGHbPb6KAJTe1avqIMVpWIejL7bF4TK+F1+YuhdnuyO1CKO0i7PO3xi6uBiyB5nIxgXTjMe8/yODNhzzmVbvnGLgYh/13+zXRETtRwvLrPnf9QEs8jLrq3vDSJF/DzONUZTPjjnKMTaLK+3vQH04HhNpVgQTgG+hTX93VCw8GxT6YnrRZelS6yyZOqLfR+FP1lhSLmNkcgOYBlVR4QINjoUcS2P6oN6OjF54ydDb9v3gb+mv05vXu0cG0C3zf/4IiPVJl1lzfsBCvT8k7WVSxodLxQeFAIoFqQMpw+Iyy9btBJsTeUNNTGz85PN/4wH59Gbvr29gkw/kszDFsyQru4NRAvmSeSbmM3oQb1Y5H9cRtaTFSUMcV0KyK5x0mI4UZm4TlRHSlRkfAk3HA92L3Ibizxr7CAkV9Xe9yIkHlo66NrjBvCbwv/7VNog9a6DNill2WxE1MX5LQeQbgfVS6D+MVBwIi0sdl583kuCjkqh47CjJPnc9nhsx/OAbRWZbAWAMaoSIAP84M7E0H2kkokSNTNujGhzKj/HeQp2vnx+Ilt7NwkhVVWxN7tlXgFlQqMuJOl72ctZeuuys4Xc5TsYsalzqaPcroyIB0pDE+iMu53S/fsfbsNG4fq2lwStGvczrYe9OXw/P7KKlwPoHt8xOtsd+oYARxWWrnrMEkadt8q52BMyCIX3iEev7bPsXAyd4xrU6dKyDsIxH0JN1xPKbELN+mLadB/OMpPrbMRkX2PWpPeCdfq5d9ltoHosj22QaMjtyALhtGs0+Ei8GXv0Mjq+aNHac1lmqfRIXG5dTux0NIEwTsA6b117zFp1bmmvPBlELNAtt1e9ukDkpFGEs2oG8YfOPGpwRYPH2RofIwJhmJL5HNofcAlgFo+oli186rn64fxVqoDt/UpeLfVaoLWrcG5Ahaol8cVLT1M0wa6VpcTdUN8VxI8Tt05PdYlooZAxpkwg/JEeqMRP4fjr5Hn6UG91KB9OWefSKKfD3l5QYaGmGsWejAFNYnqoQfjfyImDG9INsj7qGcaXjTKrVaEbpLnhyQE79rfsEjgQzXAzH8liIfmhbHLv/pr4HwAaVjDXkJLNxf4dae8rwlofTpqyQBOYek4XoOJVqcrg3x/347oz0vwDYtEeBBJrxm9s1QOOc4IdB15SLj4MzQp6OIBT+kf7gCqLdGFCjYwMm7WmO+Ppm7c9VdYizdBAZyj6mYetmNCcmU0KB04w9Lgc75i9fm4Q0O/AuKAdSE/BXECkY/jzdBQZQ5kIUT6Eap3nCPlTJe3jE/P4H91DBZfUBgCiJpfcCVd6zXAXI+RA/gQr7iNM1B8olObW82PyKzUGX+zjWYWrkFNk3VCuGzkxTQlyvHBqO/HJyE+hr2LWk8SPghLwNmeEb2g/PE9+Q6bmNG0GZafg9NGlqgja2vWxOZIsXlY23eaBtPZjkaycE/qwE5RCNWi+2AF9H2/gQGAEybXvQbNnRhBnp7QCtbyeX7DF2ijBu8yG925LvPqYxmZHoF7cUjxjNHBQjyfCx5OzqH6Edr/XcPZSnHUTNNrCMWq0KyznbOGgyFm0P1vRuZe8x6g0vht3eEnYbphEuUrxnmLpsu+v8spfS05vhP/RVlNqlKnR8Wz889am54Crdsiyo6EYcLxa6fOfuwTb77ybjpdYp1BiHIOrafMf+EfPFWEc2FMEtG4Q8sO67MW004K1u0zoMX2xMn5sJIda6VibNgphgg8URhJ56CdYdKz/mWpJnQ6EdLaTuljcJbXO/LAABtKw90w1KRvAjGs/eJvVkxYLW04dyvmHLRR+z4wNmMkXQapb+yjBpIUOFliRi3lQNSWNhPY7/+HUOIgModar4c8oJ7LWsXDD0Q52cVQ5upuOUhdpk5FN5BFvzskI0aF6s9N/3IxhUH0k4jDgUrZUscuAqwsXhqX2LNER8Wcmi5RE7Sb4FA2OBf3Kw008A81QgFZIKOo+r9JTU/ZKs+Iap6YgX1H0rHQNfJ5egBGLGX0b64UmqmNWHRyCGa6JU1GldClN2Ej4w3ydNFKPjAycC+CBq3hbjcmQDaGQ5OPQf6uI4OTQgJRkwlFSTSonlzxzOHp8+Iv8ASctX+MKjOx1Wq6No4uDHviIspi8uJAAnrAi9QdzaHj96SK6EfCYT30Ph6hSko2tv8IkGSRdmou1yNdlkoAmPZ0t84K307Q+9tVVlJv35cHn7CTityffgur3UjLNtt7KjeQmq4Xfc9kZlvwIrIl8nenHa3ma5ARy9wj8hMhYOCHNDFJyQZ7JRRVAN/H0MRNAbM7JwY2Glhp4yD5rXpe2MyHt14LPPYYzvUIqYlBZbVgVweM6WKxm2U5bQAEP5Plu0RK2LJ7BXUyXxwEXqEYrZi62Xubvgkf2ZsdgMp8X1cYdbktHSdsI0eyTyYGTaQfKKy1wr4fzS/xO4HZGgIy59PzLaikLQ8BWiQDcL5xmyNMW+V52/w7SPHRAUYPtaJOrD2AIllPg819HaGi7Wxpgoz8sITaLs3PL++GR2p6xlcuIZqjTb6HiCmrgDpoeEBp2kzfJjsqfDlD9oMTG+ODgUXRvnQA3nPsJ99MwtSbcDB+/O7sG48BL5/8JxVA7qxEpcR9uEQsEeBiqKPaycQsduU/kzMZlcvOEi5XJ7B5amiDXEklW77zuGqun4x03GLsMTai6Zi3DbD/EbRsAT8/D9i6CDboXda8AQ7L40V9e0EHus3uzuQrm1zFTvP7b/alUw8Uj5Ib09lIBQG1DxFv7Ye65oHA3jeabPLgOBQEVzJTpUnqeYDccnJWTVtWk23MBsBc/8hn8Gxhkgn+kqK/Z1G+1yLT9Mq+SBBivaGiUPODtJkqUFwFt/tdEaar8s/ZfGVabODrIjlmH1YBIZUU7L/hUGwO77kfYxcaF9FZeOrMFV0RjDZOBGNIt2HG81XwnaploSNslphwp/U4wzMoa5IK7ACVQ8CY/emh2Xnuu/Wfr+5VRjXbvdAgYxB9JqlYt4nxFXL4kTkG9sUymc6X9mmFhMgbaUiKPxXe0NdZiWTEiaBp6rzYGuDmLb1/6Ax0OejyGZh1OgeLPHqnGaP+m/cNojBEak7Z1SjrE5S2c0l67ZHq4zQ18usuhdyDfdJitiKteB9FT4zTZBmEjKAKd6510zBs2bUsoIWnTT8X3p2dLabc/RMoPIwXrk16lhcqRG2fO2vI/yiIJG765rpwJuzenqS3YRwdSRT77k6REdlCA2Dj6kjp9xk9zUaeQdE7rjFCfZP2k48cA2qGF3t+P3L3PCG+avb/ItzfpqAKKv+eYiVQ1vYiN6aQRm2dTGrflHxHNIb05dqEvazGz/05pZ9GHH/M4/hLjz/M0diOa85pcNn1CqIH+esd3JoT0LomjPJ3gJ+V8CnPeo+DlqsxSKxtxVaai82sFIp6Sjsfjp2fxIl9279EC3OmpHrU2FXVd2jWH90uAhH0E6K4VRiaLSHkSGse0OUQ/qvTTTwqiLreUU/102Dg+batOwsCbl7T34yEtD6XmBrUBXpn+tK3JO046cLRxS17AZNR/L3QU1/8taRXTIH+a8o0JrlQiHxwbkTBi6W43hw9/gKS7eOLH+84gflrYps4ZLd+nbISPDr1T0o6iOdtRvufTHnw0HIexBlaOS2kxr7pDJim9YkdGCs4Gag+2TwkSA5lmkX3Jm5hBqMaUb3JcJZJY1wZwQfFAcnnMixPTjKac/ZbJjwa28rWaTQZTWaA7Zd4hb7CGfJcXpXsnYVyB4oQH94AVGa57TT3ePqYeX6QX/e+h30PZGfR45qNegfjmeuqTdEl8p3o/5/8PZTdXbZXGByzaX4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPuQh7Kyxf3WhKf6SJ1Sbplz8nZ8ns6NNWvlLW5ezUrYXGRyQxUrBMYTfsAZoORTbrYOEsVzN1gsKMI0RZx4yozm/NAB1gwwMyEWAfD0eDUkJxMa8OOkB9Fps5UfdR1L8S8WuutidpQYHbO6/YE3Q9Ll4yFk/S25w3q78T7IgF7pGCK9t9ev+vJ8itMpMjiHXvSEQUuGgT7lt6vD52oNYf8+1y7of51zb311RFKr5AZLfJ00l93oTbRR+oJeDe5sWiCPCv/RJEteoDafIn1aT31ExAutNiI34KG58O2kqQrHoLWPyi+QvN5gAAK3fJbbyXukgFPzTVmGxNb0KUZwq7Pe4jZBI24aLF5XXKxxlInu3ahAcDguluJjYgy2FsN5rXLFxNI14hU4BbiB/Z9MxnT3Qzi1Jh1FvtMpzHSgcmNm0x+nwc5DQloXbqcktvUWhh21zYPG9L3ynpHU6+ORXudcvuoeWeRuZdKIh+x+u/NPV+ra2KXElA7h1GwWPW5j10t1dnv9M/4MNJnWmLUCCeT6DxzCdo1y3ExIe30DDk7lwX+W6sOicT+6gykb/UINss8JVDsH8WVRFDFRtVXSNGAIyIVwiNpDkxiv34RBOC0KO5AFjM2tmOTUuBtnlYNRb5K25GHCWTqDF+xtRGYnCooe2oZE9L7q5lIQ4RYYQfc7FlFL6L6Wgi2ns54xOhrMCXhKudk0k15sRsRbIRAf644mM4B6NYoTkEWvKouG0NkbQ+ngThfwft/bUt6Eo3ws4OV2KX+utiDYW0DKUvwgp+QLqkxnlWdFW1Kkv1N/nx5lBPUX89KJSgHqBVRHw89+K8qaJQbuv7s4b0Jm6ije1AWFW6cIYQ6s8pBasPu49DxdSvWZK5WOjOHhcraYTDHwsvzpuH1PlKl7GjYOoycpu+ia0/PnpnkI1IhcmcGzOFHLHQHi08dye94R/H4hb729uF3cwmn8bwAHQoXzdkqsaZ3d3sSA+xiV3R8INC7Il2xSnqyeJY+j+vm0NiV5OFdWqYkxIGROA9ttbFPJTsIuUartefsLXu/m0p1QGFivZ4w4DBr9dHiVACWJao7maRHqoAO5QGaKyBdWpKLO8w+sHeXPSaRaj4j7qu7sLHCbk6c/O+uqk5UfKq4uhyk7geq85+fTz4aUer4GgDR9j50/Ctv8HZX45pBaPeA6WMym95/Obu/Jj+X6cXUcXaZAWf5N4NJWMzg1QZPROrJFrlQvOgFf184jOAr3r8GTsBlkPkTYGMSbJU+WxIDNebl/xkOl335FZ4nuQ7DFtlPVo4ib5KJIdV2P8Zlt6wOm2E0YsyrSeyT77JVm6dUpix7k4Z7dhXNdTkePFLa0NoGKzPwuIyqlM8e1R2teyOcoX+CbOOuDg7QmM9ITy9Yu7hBvg1ZRZ7PYanGFtJdtvrxlXBM5p0peqUY4fnX8V9Pmr/Cl2dm8pS6JQECvPadkoNFmbiZBwbfA2zasW4sJd1yU7bh7eZ0aI4fvuM90eEXFvzEinRR2j2XBWWFy53eKS4Vc0TmeOcZpUkCdXPEENvMKNtRls+zj/K2/vi04AE7hn8eNFlWD7XoAddA0bnvB28pJ6+3tSPIkxAzq54QrsMKVxhMmi8mVi2MFmDnQ8Bygh2HYvGBRD8ZqK8OlGBorZkt3oOh+nOM+WgjO1HjzZhKWBsI5wc2xsPQMUgkLW4FvnL/mo4e06iKgESds6MlX0YTEzv+yj0VEhNM+TDmIE7vMoqJABoXaHO0cltDWJCK6D3vrkp4LYcY05q/BlOe8XIpfCnwG4d3DYTeJ4hQQ12mPZP3cbMyLqBBBNHARtTNIoJbX0Y6PGPNZpi0M276zvgobLBTC2LjCgWKfyyWWPwsGjTeFfLOq6wexg4FdPLLQXiOL4hXGC6XNNCJNHQN/gJVd3U7ZWq9O1ocd7lCM88oBlTF+pChuOi+73TUR+2cXrmRGAUVOFH5D8ozMqP7E4VvE3sgjPFeQD5LVHBKgE7pb6tQAAA98b7HdkwM4Byz3/Nr8mwnwqeErUt/kmaWZa1Xxtq9D2czYPY7Lg/RmLHYoKT7b1N9GLDWZ75QN2keN4s6tbqJxg7EbPVbYgaPaR26gzTMF/8PQdvkbRfE+MUQNzeRUgP5D5GFAXQmBmPFwVVgUvkj/yfjXVvKPgvaAzWq3/VhzE33rMbjjP6mtkOCMEXJc5KvfV1oaigN7/PfLlxPjByz1gtlAKoA+kjKZTfngTKgIfuuyqrwXObLZoTSQpQYLnxNCH+BFiVPnPH28tql0pjkfY0xMpU58MIo7IF1cAUX/wv4Q3cU0k6EIKxs/BJHRK4xqUyFeBcSg2L2p3U+f+M+JDx6lK461KYMwGW3rpEjj1yAop4+ClI+SWCAhnTYrbYLcJ8F35m65l6TEwxftDa0viHEa5LUNM8i/+nHdKvk1uzj8k+yAuuqwvFgOZggEIZaBNlMGiu/DDPKyUs3Bz6n/ODyPUrWU9Qmv9wv8zxPAJmkTYPqQ8ovUWjGFceG6Y5nGXcTyO3SPInNcLfCysigpOjwA1qm9Fumzq7/3f2+f9f6MBFP8r4dCnCSAq+n4Cju7GLmlan66Jxf+RAgcqKkmpOA/dZmbP8ldVIH1fi6FphdYPmIjM+/oPwxP3/l50oY7yOoitG8LyvDLEtIAm5wIzf8hUTbU01zdadwcgoMpu59iN/Wjq8vs28Atr7bQOf/c8wdOl4elNmhut0ogygpIzzIAXRjTB+Ig3Sk5VLAQc4VXmfJxr4jNHgtW77jLFcEgA2Y1t2FRnssFZB0j4EQlWHhnlROu9jC3JXxViwUJ35u1Z8iFVvYfIq2QDoF5gZRFN2i5bqr4UlOEbFgBwyITXb/yERKVWSNjq6oUFXtaK+zEQqqZ6OWBowFSOCOnE6C0y67iB7ZyBow7fHEowq1CX7dV/MeJ7H8kDNz0aFRc/4RQ5IIlz5kYJY4H/0QJEL3S3VWloo+2uU6Jt3DBZGVRq2k7M22OFfHJsQagKTpAfCFQ3upXht/MTGU4/DWi3EUuY4ijaoL6mMGi1rtgItuj8x4n32qtsxZnrkLnjnOXUYu0EKTK8t7HlJxk8RUADNUi9vu4zRTWErG3AQjHzLZhBSOCAC/9j4z6U27EJQZnWIf8FGruOSnwDjl+aRROvNvwbsTKQxyOgL/ISyFrIHmEEM2bBod/hXWbXHrUBNo2vvSv1ZR8Wuz5rCNQ/sBwwkIDn7/7N5gTuBlIgsJfNh7I0gpM9rL7wEbQ2OVbAsW7nfQ8HazgXME3QYe1LxvxLY/oVCzTqKNLi4G1VjnOLU/6lZxZD2hnarUfiHLxfXno477VfGoT/yt01T3qJn6ZrPtbnjDJuy2I4ovfPLWoqvH8+js9W2crqqMRRDWGUJdAEnhodwAAAAAICZ4XiSRSpnVYe1eYrw57NSXAre1QRe7m4wM9IDhI2eRYdTO3H0dYXZfOeK7Kvl3Kpy02Jsv5o0RamIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=",
    corner: "data:image/webp;base64,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",
    island: "data:image/webp;base64,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",
    u: "data:image/webp;base64,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"
});

const app = document.getElementById("app");
const themeBtn = document.getElementById("themeBtn");
const saveBtn = document.getElementById("saveBtn");

function initLayoutCardImages(){
    document.querySelectorAll('img[data-layout-img]').forEach(img=>{
        const key = img.getAttribute('data-layout-img');
        if(SCHEME_IMAGES[key]) img.src = SCHEME_IMAGES[key];
    });
}


const backBtn = document.getElementById("backBtn");
const nextBtn = document.getElementById("nextBtn");
const stepNowEl = document.getElementById("stepNow");
const progressFill = document.getElementById("progressFill");

const kicker = document.getElementById("kicker");
const stepTitle = document.getElementById("stepTitle");
const stepLead  = document.getElementById("stepLead");
const navHint   = document.getElementById("navHint");
const steps = Array.from(document.querySelectorAll(".step"));

const pvStyle = document.getElementById("pvStyle");
const pvLayout = document.getElementById("pvLayout");
const pvDims = document.getElementById("pvDims");
const pvTech = document.getElementById("pvTech");
const pvPack = document.getElementById("pvPack");
const pvFacade = document.getElementById("pvFacade");
const pvLed = document.getElementById("pvLed");
const pvHandle = document.getElementById("pvHandle");
// Step 1 visual preview (style moodboard)
const stylePreview = document.getElementById("stylePreview");
const stylePreviewImg = document.getElementById("stylePreviewImg");
// Fallback if image cannot be loaded (important after cache resets / path issues)
if(stylePreviewImg){
    stylePreviewImg.addEventListener("error", ()=>{
        const style = (state && state.style) ? state.style : "modern";
        stylePreviewImg.src = (STYLE_IMAGES && STYLE_IMAGES[style]) ? STYLE_IMAGES[style] : (STYLE_IMAGES.modern || "");
    });
}
const stylePreviewTitle = document.getElementById("stylePreviewTitle");
const stylePreviewText  = document.getElementById("stylePreviewText");
const stylePreviewChips = document.getElementById("stylePreviewChips");



// Нейтральні плейсхолдери для фото стилю.

function svgPlaceholder(text, c1, c2){
    const svg = `
        <svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800" viewBox="0 0 1200 800">
          <defs>
            <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="${c1}" stop-opacity="1"/>
              <stop offset="1" stop-color="${c2}" stop-opacity="1"/>
            </linearGradient>
            <radialGradient id="r" cx="30%" cy="20%" r="80%">
              <stop offset="0" stop-color="#ffffff" stop-opacity=".20"/>
              <stop offset="1" stop-color="#000000" stop-opacity="0"/>
            </radialGradient>
          </defs>
          <rect width="1200" height="800" fill="url(#g)"/>
          <rect width="1200" height="800" fill="url(#r)"/>
          <g fill="#ffffff" opacity=".90" font-family="system-ui, -apple-system, Segoe UI, Roboto" text-anchor="middle">
            <text x="600" y="390" font-size="44" font-weight="700">${text}</text>
            <text x="600" y="445" font-size="22" opacity=".85">Фото-плейсхолдер (замініть)</text>
          </g>
        </svg>`;
    return "data:image/svg+xml;charset=UTF-8," + encodeURIComponent(svg);
}


// --- STEP1 images: use real JPGs when available; fall back to SVG placeholders ---
function resolveAsset(path){
    try { return new URL(path, document.baseURI).toString(); }
    catch(e){ return path; }
}
function withBust(url){
    if (!url) return url;
    const bust = String(window.KC_BUILD || window.__KC_BUILD__ || Date.now());
    // add ?v=... preserving existing query
    return url + (url.includes("?") ? "&" : "?") + "v=" + encodeURIComponent(bust);
}

const STYLE_PLACEHOLDERS = {
    modern:  svgPlaceholder("Сучасна",  "#2b135d", "#10131a"),
    minimal: svgPlaceholder("Мінімал",  "#1e2a3a", "#0f1218"),
    classic: svgPlaceholder("Класика",  "#5a3a20", "#141018"),
    loft:    svgPlaceholder("Лофт",     "#3a2a1e", "#10131a"),
};

const STYLE_IMAGES = {
    // If images/3.jpg or images/4.jpg don't exist, the onerror fallback will swap to SVG.
    modern:  withBust(resolveAsset("images/1.jpg")),
    minimal: withBust(resolveAsset("images/2.jpg")),
    classic: withBust(resolveAsset("images/3.jpg")),
    loft:    withBust(resolveAsset("images/4.jpg")),
};

function getStyleImage(style){
    return STYLE_IMAGES[style] || STYLE_IMAGES.modern;
}

function preloadImage(url){
    if(!url) return;
    const img = new Image();
    img.decoding = "async";
    img.src = url;
}
// pre-warm likely first images (helps after cache clear)
preloadImage(STYLE_IMAGES.modern);
preloadImage(STYLE_IMAGES.minimal);


const pvComfort = document.getElementById("pvComfort");
const pvReady = document.getElementById("pvReady");
const stateDebug = document.getElementById("stateDebug");

const techChips = document.getElementById("techChips");
const packAuto = document.getElementById("packAuto");

const scheme = document.getElementById("scheme");
const schemeText = document.getElementById("schemeText");

const dimA = document.getElementById("dimA");
const dimBWrap = document.getElementById("dimBWrap");
const dimB = document.getElementById("dimB");
const cornerWrap = document.getElementById("cornerWrap");

const dwOptions = document.getElementById("dwOptions");
const resetStep6Btn = document.getElementById("resetStep6Btn");

const leadNameEl = document.getElementById("leadName");
const leadPhoneEl = document.getElementById("leadPhone");
const leadCommentEl = document.getElementById("leadComment");

// island inputs (STEP 3)
const islandWrap     = document.getElementById("islandWrap");
const islandLenEl    = document.getElementById("islandLen");
const islandDepthEl  = document.getElementById("islandDepth");

const state = {
    step: 1,
    theme: "dark",
    style: null,
    layout: null,
    dims: { A: null, B: null, corner: 900 },
    tech: { fridge:false, dishwasher:false, oven:false, hob:false, hood:false, sink:false, dishwasherWidth:450 },
    package: null,
    // step 6
    facade: null, // dsp/mdf/glass/mix
    led: null,    // none/under/profile/smart
    handle: null, // standard/profile/gola/push
    step6Customized: false,
    // step 7
    comfortKit: null, // econom/standard/premium
    hardwarePackage: null, // SoT for Step8 hardware: econom/standard/premium
    step7Customized: false,
    // step 8 lead
    leadName: "",
    leadPhone: "",
    leadComment: ""
};

// ===== Public bridge (for step*.js / modules.*.js) =====
// Step-файли і модульний движок (modules.engine/ui) очікують доступ до стану
// через window.kcGetState / window.kcSetState / window.KC_STATE.
// Якщо цього немає — вони працюють з порожнім об'єктом і генерація модулів = 0.
window.KC_STATE = state;

function __kcDeepMerge(target, patch){
    if (!patch || typeof patch !== "object") return target;
    Object.keys(patch).forEach((k)=>{
        const pv = patch[k];
        if (pv && typeof pv === "object" && !Array.isArray(pv)) {
            target[k] = target[k] && typeof target[k] === "object" ? target[k] : {};
            __kcDeepMerge(target[k], pv);
        } else {
            target[k] = pv;
        }
    });
    return target;
}

window.kcGetState = () => state;
window.kcSetState = (patch) => {
    __kcDeepMerge(state, patch || {});
    try { saveState(); } catch(e) {}
    try { updatePreview(); } catch(e) {}
    try { window.dispatchEvent(new CustomEvent("KC_STATE_CHANGED", { detail: state })); } catch(e) {}
};

// Back-compat: деякі step-файли використовують window.KC.getState/setState
window.KC = window.KC || {};
if (!window.KC.getState) window.KC.getState = window.kcGetState;
if (!window.KC.setState) window.KC.setState = window.kcSetState;

function prettyStyle(s){ return ({modern:"Сучасна", minimal:"Мінімал", classic:"Класика", loft:"Лофт"}[s] || "—"); }
function prettyLayout(l){ return ({straight:"Пряма", corner:"Кутова", u:"П‑подібна", island:"З островом"}[l] || "—"); }
function prettyTechKey(k){ return ({fridge:"Холодильник‑колона", dishwasher:"Посудомийна", oven:"Духовка", hob:"Варильна", hood:"Витяжка", sink:"Мийка"}[k] || k); }
function prettyPack(p){ return ({economy:"Економ", standard:"Стандарт", premium:"Преміум"}[p] || "—"); }
function prettyFacade(f){ return ({dsp:"ДСП", mdf:"Фарб. МДФ", glass:"Скло+профіль", mix:"Комбі"}[f] || "—"); }
function prettyLed(l){ return ({none:"Без LED", under:"Під шафами", profile:"У профілі/вітринах", smart:"Сценарії"}[l] || "—"); }

// ===== Step 1: style visual preview (sales) =====
const STYLE_VISUALS = {
    modern: {
        title: "Сучасна",
        text: "Чіткі лінії, практичні матеріали, нейтральні фактури. Добре підходить для більшості планувань.",
        chips: ["рівні фасади", "контраст", "практично"]
    },
    minimal: {
        title: "Мінімал",
        text: "Нічого зайвого: світлі тони, спокійні поверхні, максимум простору та легкий догляд.",
        chips: ["мінімум деталей", "чистий вигляд", "легко"]
    },
    classic: {
        title: "Класика",
        text: "Теплі відтінки, м’які форми та відчуття дому. Добре працює з дерев’яними фактурами.",
        chips: ["затишок", "теплі кольори", "традиційно"]
    },
    loft: {
        title: "Лофт",
        text: "Фактури, темні акценти, метал і контраст. Виразний характер та сучасний вайб.",
        chips: ["темні акценти", "фактура", "контраст"]
    }
};


// Safe HTML escaping for dynamic chips/text
function escapeHtml(value){
    return String(value ?? "")
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#39;");
}

function updateStylePreview(){
    if(!stylePreview) return;
    const key = (state.style || "modern");
    const v = STYLE_VISUALS[key] || STYLE_VISUALS.modern;

    stylePreview.setAttribute("data-style", key);

    // Фото (плейсхолдер або твоє /assets/...)
    if (stylePreviewImg) {
        stylePreviewImg.src = v.img || STYLE_IMAGES[key] || STYLE_IMAGES.modern;
        stylePreviewImg.alt = "Приклад стилю: " + (v.title || key);
    }

    if(stylePreviewTitle) stylePreviewTitle.textContent = v.title;
    if(stylePreviewText)  stylePreviewText.textContent  = v.text;

    if(stylePreviewChips){
        stylePreviewChips.innerHTML = (v.chips || []).map(t => `<span class="chip">${escapeHtml(t)}</span>`).join("");
    }
}

function prettyHandle(h){ return ({standard:"Накладні", profile:"Профіль‑ручка", gola:"Gola (без ручок)", push:"Tip‑On"}[h] || "—"); }
function prettyComfort(c){ return ({econom:"Економ", standard:"Стандарт", premium:"Преміум"}[c] || "—"); }

function clampNum(v, min, max){ v = Number(v); if(Number.isNaN(v)) return null; return Math.max(min, Math.min(max, v)); }
function currentCorner(){ const r = document.querySelector('input[name="corner"]:checked'); return r ? Number(r.value) : 900; }
function currentDW(){ const r = document.querySelector('input[name="dw"]:checked'); return r ? Number(r.value) : 450; }

function saveState(){
    try{
        const st = Object.assign({}, state);
        st._v = STATE_VERSION;
        // do not persist derived/runtime fields
        delete st.wallWidth;
        delete st.modules;
        delete st.modulesMeta;
        localStorage.setItem(LS_KEY, JSON.stringify(st));
        saveBtn.textContent = "✅ Збережено";
        setTimeout(()=> saveBtn.textContent = "💾 Зберегти", 900);
    }catch(e){
        console.warn("KC saveState failed", e);
        alert("Не вдалося зберегти (localStorage).");
    }
}

function loadState(){
    try{
        const raw = localStorage.getItem(LS_KEY);
        if(!raw) return;
        const st = JSON.parse(raw);
        if(st && typeof st === "object"){
            Object.assign(state, st);
            // schema migration / cache-bust: prevent stale localStorage from breaking new logic
            if(state._v !== STATE_VERSION){
                delete state.wallWidth;
                delete state.modules;
                delete state.modulesMeta;
                state._v = STATE_VERSION;
            }
            if(!state.dims) state.dims = {A:null,B:null,corner:900};
            if(!state.theme) state.theme = "dark";
            if(!state.tech) state.tech = {fridge:false,dishwasher:false,oven:false,hob:false,hood:false,sink:false,dishwasherWidth:450};
            if(!state.tech.dishwasherWidth) state.tech.dishwasherWidth = 450;
            if(state.step6Customized === undefined) state.step6Customized = false;
            if(state.step7Customized === undefined) state.step7Customized = false;
        }
    }catch(e){}
}

function setActiveCard(containerSelector, attr, value){
    const cards = Array.from(document.querySelectorAll(containerSelector + " .card"));
    cards.forEach(c => c.classList.toggle("active", c.getAttribute(attr) === value));
}

function setToggleCardActive(containerSelector){
    const cards = Array.from(document.querySelectorAll(containerSelector + " .card"));
    cards.forEach(c=>{
        const key = c.dataset.tech;
        c.classList.toggle("active", !!state.tech[key]);
    });
}

function applyPackageDefaults(force=false){
    if(!state.package) return;

    // step 6 defaults
    if(force || !state.step6Customized){
        const map6 = {
            economy: { facade:"dsp", led:"none", handle:"standard" },
            standard:{ facade:"mdf", led:"under", handle:"profile" },
            premium: { facade:"glass", led:"smart", handle:"gola" }
        }[state.package];

        if(map6){
            state.facade = map6.facade;
            state.led = map6.led;
            state.handle = map6.handle;
            if(force) state.step6Customized = false;
        }
    }

    // step 7 defaults follow package (economy -> econom)
    if(force || !state.step7Customized){
        const map7 = { economy:"econom", standard:"standard", premium:"premium" }[state.package];
        if(map7){
            state.comfortKit = map7;
            state.hardwarePackage = map7; // ✅ keep SoT in sync
            if(force) state.step7Customized = false;
        }
    }

    setActiveCard("#facadeCards", "data-facade", state.facade);
    setActiveCard("#ledCards", "data-led", state.led);
    setActiveCard("#handleCards", "data-handle", state.handle);
    setActiveCard("#comfortCards", "data-comfort", state.comfortKit);
}

function updateHeaderTexts(){
    if(state.step === 1){
        kicker.textContent = "Починаємо з образу";
        stepTitle.textContent = "Якою ви уявляєте свою кухню?";
        stepLead.textContent  = "Оберіть стиль — це вплине на матеріали та бюджет.";
    }else if(state.step === 2){
        kicker.textContent = "Форма простору";
        stepTitle.textContent = "Оберіть планування кухні";
        stepLead.textContent  = "Виберіть форму — далі введемо лише 2–3 розміри.";
    }else if(state.step === 3){
        kicker.textContent = "Мінімум цифр";
        stepTitle.textContent = "Вкажіть розміри";
        stepLead.textContent  = "Достатньо приблизно — ми уточнимо деталі на етапі прорахунку.";
    }else if(state.step === 4){
        kicker.textContent = "Функціональність";
        stepTitle.textContent = "Що має бути на кухні?";
        stepLead.textContent  = "Оберіть техніку — ми підлаштуємо шафи під неї.";
    }else if(state.step === 5){
        kicker.textContent = "Рівень якості";
        stepTitle.textContent = "Оберіть пакет комплектації";
        stepLead.textContent  = "Економ / Стандарт / Преміум — щоб швидко зрозуміти бюджет і склад.";
    }else if(state.step === 6){
        kicker.textContent = "Зовнішній вигляд";
        stepTitle.textContent = "Фасади, LED, ручки";
        stepLead.textContent  = "Оберіть вигляд — це найбільше впливає на “вау‑ефект”.";
    }else if(state.step === 7){
        kicker.textContent = "Комфорт";
        stepTitle.textContent = "Комфорт: фурнітура та комплекти";
        stepLead.textContent  = "Оберіть рівень користування. Деталі/бренди — вже на етапі точного прорахунку.";
    }else if(state.step === 8){
        kicker.textContent = "Підсумок";
        stepTitle.textContent = "Оцінка бюджета";
        stepLead.textContent  = "Ви зібрали кухню під свої задачі. Залиште контакт — ми підготуємо точний прорахунок і варіанти.";
    }

    navHint.textContent = "Стиль → Планування → Розміри → Техніка → Пакет → Фасади → Комфорт → Контакт";
}

function updateDimUI(){
    const l = state.layout;

    const needsBAndCorner = (l === "corner" || l === "u" || l === "island");
    dimBWrap.style.display   = needsBAndCorner ? "" : "none";
    cornerWrap.style.display = needsBAndCorner ? "" : "none";

    // ✅ island block
    if (islandWrap) islandWrap.style.display = (l === "island") ? "" : "none";
}


function updateTechUI(){
    dwOptions.style.display = state.tech.dishwasher ? "" : "none";
    setToggleCardActive("#techCards");
    const r = document.querySelector(`input[name="dw"][value="${state.tech.dishwasherWidth}"]`);
    if(r) r.checked = true;
    updateDishwasherHint(); // ← ДОДАЙ ЦЕ
}

function updateDishwasherHint(){
    const el = document.getElementById("dwHint");
    if(!el) return;

    // показуємо тільки якщо ПММ увімкнена і вибрано 800
    const isDW = !!state.tech.dishwasher;
    const w = Number(state.tech.dishwasherWidth || 0);

    // беремо актуальні A/B (з state, або з інпутів якщо ще не встигло)
    const A = Number(state.dims?.A || dimA?.value || 0);
    const B = Number(state.dims?.B || dimB?.value || 0);

    const needWarn = isDW && w === 800 && (
        (A > 0 && A < 2400) || (B > 0 && B < 2400)
    );

    el.style.display = needWarn ? "" : "none";
}



// ===== STEP 5: preset engine (package -> auto defaults) =====
// Central place to apply a package preset and keep UI/preview/state in sync.
function applyPackPreset(pack, opts = {}){
    const { force = true, scrollToNext = false } = opts;
    if(!pack) return;

    state.package = pack;

    // visual select on STEP 5
    setActiveCard("#packageCards", "data-pack", state.package);

    // apply dependent defaults (facades/LED/handles/comfort)
    applyPackageDefaults(!!force);

    // update "Авто-набір" explanation + preview + persist
    updatePackageUI();
    updateNextEnabled();
    updatePreview();
    saveState();

    if(scrollToNext){
        try {
            const nextBtn = document.getElementById("nextBtn");
            nextBtn?.scrollIntoView({ behavior: "smooth", block: "center" });
        } catch(e){}
    }
}
function updatePackageUI(){
    if(state.package) setActiveCard("#packageCards", "data-pack", state.package);

    const p = state.package;
    if(!p){
        packAuto.innerHTML = "Оберіть пакет — ми покажемо, що саме підхопиться по фасадах / фурнітурі / стільниці / LED.";
        return;
    }
    const rows = {
        economy: [
            "Фасади: <b>ДСП</b> (база)",
            "Комфорт: <b>Економ</b> (базова фурнітура)",
            "Стільниця: <b>ДСП</b> (база), фартух — опція",
            "LED: <b>опція</b> (далі на кроці 6)"
        ],
        standard: [
            "Фасади: <b>ДСП або фарбований МДФ</b> (підбір)",
            "Комфорт: <b>Стандарт</b> (доводчики)",
            "Стільниця: <b>ДСП / компакт</b> (за вибором)",
            "LED: <b>часто так</b> (підсвітка робочої зони)"
        ],
        premium: [
            "Фасади: <b>фарб. МДФ / скло+профіль</b>",
            "Комфорт: <b>Преміум</b> (макс. комфорт)",
            "Стільниця: <b>компакт / камінь</b> (уточнимо)",
            "LED: <b>майже завжди</b> (сценарії)"
        ]
    }[p] || [];
    packAuto.innerHTML = "<ul style='margin:10px 0 0;padding-left:18px;line-height:1.6'>" + rows.map(x=>"<li>"+x+"</li>").join("") + "</ul>";
}

function isStepValid(n){
    if(n === 1) return !!state.style;
    if(n === 2) return !!state.layout;
    if(n === 3){
        const A = clampNum(dimA.value, 800, 12000);
        if(state.layout === "straight") return !!A;
        const B = clampNum(dimB.value, 800, 12000);
        return !!A && !!B;
    }
    if(n === 4) return true;
    if(n === 5) return !!state.package;
    if(n === 6) return !!state.facade && !!state.led && !!state.handle;
    if(n === 7) return !!state.comfortKit;
    if(n === 8) return (state.leadPhone || "").replace(/\D/g,"").length >= 10;
    return true;
}

function updateNextEnabled(){
    nextBtn.disabled = !isStepValid(state.step);

    pvReady.textContent =
        state.step === 1 ? (state.style ? "Готово → планування" : "Оберіть стиль") :
            state.step === 2 ? (state.layout ? "Готово → розміри" : "Оберіть планування") :
                state.step === 3 ? (isStepValid(3) ? "Готово → техніка" : "Вкажіть розміри") :
                    state.step === 4 ? "Готово → пакет" :
                        state.step === 5 ? (state.package ? "Готово → фасади" : "Оберіть пакет") :
                            state.step === 6 ? (isStepValid(6) ? "Готово → комфорт" : "Оберіть фасади/LED/ручки") :
                                state.step === 7 ? (state.comfortKit ? "Готово → контакт" : "Оберіть комфорт") :
                                    state.step === 8 ? (isStepValid(8) ? "Готово → відправити" : "Введіть телефон") :
                                        "—";

    nextBtn.textContent = (state.step === 8) ? "📩 Отримати прорахунок" : "Далі →";
}

function showStep(n){
    state.step = n;
    steps.forEach(s => s.classList.toggle("active", Number(s.dataset.step) === n));
    stepNowEl.textContent = String(n);
    progressFill.style.width = String(Math.round((n/8)*100)) + "%";
    backBtn.disabled = n === 1;

    // ensure defaults are applied once we have a package
    if(n >= 6 && state.package) applyPackageDefaults(false);

    updateHeaderTexts();
    updateDimUI();
    updateTechUI();
    updatePackageUI();
    updateNextEnabled();
    updatePreview();
    saveState();
}


function clearScheme(){ scheme.innerHTML = ""; }

function schemeLabelsHTML(layout){
    if(layout === "straight"){
        return '<div class="scheme-label a">A</div>';
    }
    if(layout === "corner"){
        return '<div class="scheme-label a">A</div><div class="scheme-label b">B</div>';
    }
    if(layout === "u"){
        return '<div class="scheme-label a">A</div><div class="scheme-label b">B</div><div class="scheme-label c">C</div>';
    }
    if(layout === "island"){
        return '<div class="scheme-label a">A</div><div class="scheme-label b">B</div>';
    }
    return "";
}

function renderScheme(){
    clearScheme();
    const l = state.layout;
    if(!l){ schemeText.textContent = "Виберіть планування — схема з’явиться тут."; return; }

    const src = SCHEME_IMAGES[l] || "";
    scheme.innerHTML = `
        <img class="scheme-img" src="${src}" alt="Схема планування"/>
        ${schemeLabelsHTML(l)}
      `;

    if(l === "straight"){
        schemeText.textContent = "Пряма кухня: всі модулі на одній лінії (A).";
    } else if(l === "corner"){
        schemeText.textContent = "Кутова кухня: довжина до кута (A) + після кута (B).";
    } else if(l === "u"){
        schemeText.textContent = "П‑подібна: три сторони (A/B/C). У MVP поки збираємо A+B.";
    } else if(l === "island"){
        schemeText.textContent = "З островом: окремий крок для острова (пізніше). База — як кутова/пряма.";
    }
}


function updateTechPreview(){
    const selected = Object.entries(state.tech)
        .filter(([k,v]) => ["fridge","dishwasher","oven","hob","hood","sink"].includes(k) && v)
        .map(([k]) => k);

    if(selected.length === 0){
        setText('pvTech', "—");
        techChips.style.display = "none";
        techChips.innerHTML = "";
        return;
    }

    setText('pvTech', selected.map(k => prettyTechKey(k)).join(", "));
    techChips.innerHTML = "";
    selected.forEach(k=>{
        let extra = "";
        if(k === "dishwasher") extra = ` <small>${state.tech.dishwasherWidth} мм</small>`;
        techChips.insertAdjacentHTML("beforeend", `<li class="chip">✅ ${prettyTechKey(k)}${extra}</li>`);
    });
    techChips.style.display = "";
}

function updatePreview(){
    setText('pvStyle', prettyStyle(state.style));
    setText('pvLayout', prettyLayout(state.layout));

    const A = clampNum(dimA.value, 0, 99999);
    const B = clampNum(dimB.value, 0, 99999);
    const corner = currentCorner();
    // ✅ island dims (важливо для Step4 engine)
    const islandLen   = islandLenEl ? clampNum(islandLenEl.value, 0, 99999) : 0;
    const islandDepth = islandDepthEl ? clampNum(islandDepthEl.value, 0, 99999) : 0;

    state.dims.island = islandLen ? Math.round(islandLen) : null;
    state.dims.islandDepth = islandDepth ? Math.round(islandDepth) : null;

    if(A) state.dims.A = Math.round(A);
    else state.dims.A = null;
    if(B) state.dims.B = Math.round(B);
    else state.dims.B = null;
    state.dims.corner = corner;

    const l = state.layout;
    const hasDims = !!state.dims.A && (l === "straight" ? true : !!state.dims.B);
    setText('pvDims', hasDims
        ? (l === "straight" ? `A = ${state.dims.A} мм` : `A = ${state.dims.A} мм, B = ${state.dims.B} мм, кут ${state.dims.corner}`)
        : "—");

    setText('pvPack', prettyPack(state.package));
    setText('pvFacade', prettyFacade(state.facade));
    setText('pvLed', prettyLed(state.led));
    setText('pvHandle', prettyHandle(state.handle));
    setText('pvComfort', prettyComfort(state.comfortKit));

    updateTechPreview();
    renderScheme();
    if (stateDebug) stateDebug.textContent = JSON.stringify(state, null, 2);
    updateStylePreview();
}

// Wiring
function wireCards(){
    document.querySelectorAll("#styleCards .card").forEach(card=>{
        card.addEventListener("click", ()=>{
            state.style = card.dataset.style;
            setActiveCard("#styleCards", "data-style", state.style);
            updateNextEnabled(); updatePreview(); saveState();
        });
    });

    document.querySelectorAll("#layoutCards .card").forEach(card=>{
        card.addEventListener("click", ()=>{
            state.layout = card.dataset.layout;

            // ✅ дефолты острова (только если пусто)
            if (state.layout === "island") {
                const curIslandLen   = Number(islandLenEl?.value) || 0;
                const curIslandDepth = Number(islandDepthEl?.value) || 0;

                if (islandLenEl && !curIslandLen) islandLenEl.value = 1800;
                if (islandDepthEl && !curIslandDepth) islandDepthEl.value = 900;

                // ✅ ВАЖНО: пушим в state, чтобы Step4 сразу увидел цифры
                state.dims = state.dims || {};
                state.dims.island = Number(islandLenEl?.value) || 1800;
                state.dims.islandDepth = Number(islandDepthEl?.value) || 900;
            }

            setActiveCard("#layoutCards", "data-layout", state.layout);

            updateDimUI();
            updateNextEnabled();
            updatePreview();
            saveState();

            // ✅ Step4 должен пересчитать мгновенно
            if (window.kcDispatchStateUpdated) window.kcDispatchStateUpdated("layout");
            // если есть bus:
            if (window.KC_BUS?.emit) window.KC_BUS.emit("kc:layout-changed", { layout: state.layout });
        });
    });



    document.querySelectorAll("#techCards .card").forEach(card=>{
        card.addEventListener("click", ()=>{
            const key = card.dataset.tech;
            state.tech[key] = !state.tech[key];
            updateTechUI(); updateNextEnabled(); updatePreview(); saveState();

            // ✅ Step4 має перерахувати модулі миттєво
            if (window.kcDispatchStateUpdated) window.kcDispatchStateUpdated("step1");
        });
    });

    document.querySelectorAll("#packageCards .card").forEach(card=>{
        card.addEventListener("click", ()=>{
            applyPackPreset(card.dataset.pack, { force: true }); // package selection resets defaults
        });
    });

    document.querySelectorAll("#facadeCards .card").forEach(card=>{
        card.addEventListener("click", ()=>{
            state.facade = card.dataset.facade;
            state.step6Customized = true;
            setActiveCard("#facadeCards", "data-facade", state.facade);
            updateNextEnabled(); updatePreview(); saveState();
        });
    });

    document.querySelectorAll("#ledCards .card").forEach(card=>{
        card.addEventListener("click", ()=>{
            state.led = card.dataset.led;
            state.step6Customized = true;
            setActiveCard("#ledCards", "data-led", state.led);
            updateNextEnabled(); updatePreview(); saveState();
        });
    });

    document.querySelectorAll("#handleCards .card").forEach(card=>{
        card.addEventListener("click", ()=>{
            state.handle = card.dataset.handle;
            state.step6Customized = true;
            setActiveCard("#handleCards", "data-handle", state.handle);
            updateNextEnabled(); updatePreview(); saveState();
        });
    });

    document.querySelectorAll("#comfortCards .card").forEach(card=>{
        if(card.classList.contains("subtle")) return;
        card.addEventListener("click", ()=>{
            state.comfortKit = card.dataset.comfort;
            state.hardwarePackage = state.comfortKit; // ✅ SoT for Step8
            state.step7Customized = true;
            setActiveCard("#comfortCards", "data-comfort", state.comfortKit);
            updateNextEnabled(); updatePreview(); saveState();
        });
    });
}

function wireDims(){
    const onDimChange = ()=>{
        updateDimUI(); updateNextEnabled(); updatePreview(); saveState();

        // ✅ якщо габарити/кут змінюють планування — Step4 має реагувати одразу
        if (window.kcDispatchStateUpdated) window.kcDispatchStateUpdated("step1");
    };

    dimA.addEventListener("input", onDimChange);
    dimB.addEventListener("input", onDimChange);
    document.querySelectorAll('input[name="corner"]').forEach(r=> r.addEventListener("change", onDimChange));
}


function wireTech(){
    document.querySelectorAll('input[name="dw"]').forEach(r=>{
        r.addEventListener("change", ()=>{
            const v = Number(document.querySelector('input[name="dw"]:checked')?.value || 600);
            state.tech.dishwasherWidth = v;
            saveState();

            // ✅ миттєве оновлення модулів на Step4
            if (window.kcDispatchStateUpdated) window.kcDispatchStateUpdated("step1");
        });
    });
}


function wireLead(){
    if(leadNameEl) leadNameEl.addEventListener("input", ()=>{ state.leadName = leadNameEl.value; saveState(); });
    if(leadPhoneEl) leadPhoneEl.addEventListener("input", ()=>{ state.leadPhone = leadPhoneEl.value; updateNextEnabled(); saveState(); });
    if(leadCommentEl) leadCommentEl.addEventListener("input", ()=>{ state.leadComment = leadCommentEl.value; saveState(); });
}

function wireNav(){
    backBtn.addEventListener("click", ()=> showStep(Math.max(1, state.step - 1)));
    nextBtn.addEventListener("click", ()=>{
        if(!isStepValid(state.step)) return;

        if(state.step < 8){
            showStep(state.step + 1);
            return;
        }

        // step 8 submit (MVP)
        const payload = {
            style: state.style,
            layout: state.layout,
            dims: state.dims,
            tech: state.tech,
            package: state.package,
            facade: state.facade,
            led: state.led,
            handle: state.handle,
            comfortKit: state.comfortKit,
            leadName: state.leadName,
            leadPhone: state.leadPhone,
            leadComment: state.leadComment,
            createdAt: new Date().toISOString()
        };

        console.log("KC lead payload (MVP):", payload);
        alert("✅ Дякуємо! Заявку сформовано (MVP).\nМи зв’яжемось з вами найближчим часом.");
        saveState();
    });
}

function getTheme(){
    return document.documentElement.getAttribute("data-theme") || "dark";
}
function setTheme(theme){
    document.documentElement.setAttribute("data-theme", theme);
    app.setAttribute("data-theme", theme);
}
function initTheme(){
    const t = (state.theme || localStorage.getItem("KC_THEME") || "dark");
    setTheme(t);
}
function wireTheme(){
    themeBtn.addEventListener("click", ()=>{
        const cur = getTheme();
        const next = (cur === "dark") ? "light" : "dark";
        setTheme(next);
        state.theme = next;
        localStorage.setItem("KC_THEME", next);
        saveState();
    });
}

function wireResetStep6(){
    resetStep6Btn.addEventListener("click", ()=>{
        state.step6Customized = false;
        applyPackageDefaults(true);
        updatePackageUI();
        updateNextEnabled(); updatePreview(); saveState();
    });
}

function hydrateFromState(){
    setTheme(state.theme || "dark");

    if(state.style) setActiveCard("#styleCards", "data-style", state.style);
    if(state.layout) setActiveCard("#layoutCards", "data-layout", state.layout);
    if(state.package) setActiveCard("#packageCards", "data-pack", state.package);

    if(state.dims?.A) dimA.value = state.dims.A;
    if(state.dims?.B) dimB.value = state.dims.B;

    const corner = state.dims?.corner || 900;
    const r = document.querySelector(`input[name="corner"][value="${corner}"]`);
    if(r) r.checked = true;

    updateDimUI();
    updateTechUI();
    updatePackageUI();

    if(state.package) applyPackageDefaults(false);

    if(state.facade) setActiveCard("#facadeCards", "data-facade", state.facade);
    if(state.led) setActiveCard("#ledCards", "data-led", state.led);
    if(state.handle) setActiveCard("#handleCards", "data-handle", state.handle);
    if(state.comfortKit) setActiveCard("#comfortCards", "data-comfort", state.comfortKit);

    if(leadNameEl) leadNameEl.value = state.leadName || "";
    if(leadPhoneEl) leadPhoneEl.value = state.leadPhone || "";
    if(leadCommentEl) leadCommentEl.value = state.leadComment || "";

    showStep(Math.min(8, Math.max(1, state.step || 1)));
}

// Init
document.addEventListener('DOMContentLoaded', () => {
    loadState();
    initTheme();

    wireTheme();
    wireCards();
    wireDims();
    wireTech();
    wireLead();
    wireNav();
    wireResetStep6();

    hydrateFromState();
    updatePreview();
    updateNextEnabled();
});



/* =========================
   KC → CALC ENGINE v1 (MVP)
   Client: presets only
   Manager: presets + manual overrides
========================= */


function sheetAreaM2(){ return (CALC.sheet.w/1000) * (CALC.sheet.h/1000); }

function num(v, def=0){ v = Number(v); return Number.isFinite(v) ? v : def; }

function bool(v, fallback=false){
    // Accepts boolean-like values; if v is undefined/null/"" -> returns fallback
    if (v === undefined || v === null || v === "") return !!fallback;
    return !!v;
}



function fmtUAH(x){
    const n = Math.round(num(x,0));
    return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") + " грн";
}

// Small HTML escape helper (prevents broken markup / XSS when rendering strings)
function esc(v){
    const s = String(v ?? "");
    return s
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/\"/g, "&quot;")
        .replace(/'/g, "&#39;");
}

// Set text helper (accepts element or id)
function setText(target, value){
    const el = (typeof target === "string") ? document.getElementById(target) : target;
    if(!el) return;
    el.textContent = (value ?? "");
}


/* --- 1) Generate a simple module set from KC state (MVP) --- */

/* --- 1) Generate a simple module set from KC state (MVP) ---
   Calibrated for STRAIGHT kitchen (A) first.
   We generate base modules from appliances + fillers.
*/


/* --- 2) Compute areas from modules (MVP, calibrated) ---
   корпус: counts "equivalent chipboard area" for 18mm board
   фасади: direct facade area from module widths & standard heights
*/

function kcComputeAreas(modset){
  // Backward compatible:
  // 1) old формат: { base:[600,800], upper:[600], ... } (масиви ширин у мм)
  // 2) new формат: плоский масив модулів STEP4: [{type, role, width|w, height|h, depth|d, shelves...}, ...]
  const state = window.KC_STATE || {};
  const meta = (state.meta && typeof state.meta === "object") ? state.meta : {};

  const mm2 = (a,b)=>Math.max(0,Number(a)||0)*Math.max(0,Number(b)||0);
  const mm2_to_m2 = (v)=>(Number(v)||0)/1_000_000;

  const baseH  = Number(meta.baseH  ?? 830);
  const upperH = Number(meta.upperH ?? 720);
  const tallH  = Number(meta.tallH  ?? 2300);
  const baseD  = Number(meta.baseD  ?? 560);
  const upperD = Number(meta.upperD ?? 320);
  const tallD  = Number(meta.tallD  ?? 560);

  let corpSidesMM2=0, corpTBMM2=0, corpShelvesMM2=0, backMM2=0, facadeMM2=0;

  const addModule = (W,H,D,shelvesCount)=>{
    if(!W) return;
    corpSidesMM2 += 2*mm2(H,D);
    corpTBMM2    += 2*mm2(W,D);
    if(shelvesCount>0) corpShelvesMM2 += shelvesCount*mm2(W,D);
    backMM2      += mm2(W,H);
    facadeMM2    += mm2(W,H);
  };

  // ---- NEW: плоский массив модулів
  if (Array.isArray(modset)) {
    modset.forEach((m)=>{
      if(!m) return;
      const type=(m.type||m.role||"").toString().toLowerCase();
      const W=Number(m.width ?? m.w ?? 0);
      if(!W) return;

      let H=Number(m.height ?? m.h ?? 0);
      let D=Number(m.depth  ?? m.d ?? 0);

      if(!H){
        if(type.includes("upper")) H=upperH;
        else if(type.includes("tall") || type.includes("fridge")) H=tallH;
        else H=baseH;
      }
      if(!D){
        if(type.includes("upper")) D=upperD;
        else if(type.includes("tall") || type.includes("fridge")) D=tallD;
        else D=baseD;
      }

      const shelvesCount = Number(m.shelves ?? m.shelvesCount ?? (
        type.includes("tall") ? 2 :
        type.includes("upper") ? 0 : 1
      ));

      addModule(W,H,D,shelvesCount);
    });
  } else {
    // ---- OLD: {base:[w..], upper:[w..], tall:[w..]}
    const base = (modset && Array.isArray(modset.base)) ? modset.base : [];
    const upper = (modset && Array.isArray(modset.upper)) ? modset.upper : [];
    const tall = (modset && Array.isArray(modset.tall)) ? modset.tall : [];

    base.forEach((W)=> addModule(Number(W)||0, baseH, baseD, 1));
    upper.forEach((W)=> addModule(Number(W)||0, upperH, upperD, 0));
    tall.forEach((W)=> addModule(Number(W)||0, tallH, tallD, 2));
  }

  const corpSidesM2 = mm2_to_m2(corpSidesMM2);
  const corpBottomTopM2 = mm2_to_m2(corpTBMM2);
  const corpShelvesM2 = mm2_to_m2(corpShelvesMM2);

  const corpM2 = corpSidesM2 + corpBottomTopM2 + corpShelvesM2;
  const facadeM2 = mm2_to_m2(facadeMM2);
  const backM2 = mm2_to_m2(backMM2);

  return {
    corpSidesM2,
    corpBottomTopM2,
    corpShelvesM2,
    corpM2,
    facadeM2,
    backM2
  };
}

function getCalcParams(){
    const pack = state.package || "standard";
    // UI uses data-pack="economy" while the calc presets were historically keyed as "econ".
    const packKey = (pack === "economy") ? "econ" : pack;
    const preset = (CALC.presets && (CALC.presets[packKey] || CALC.presets.standard)) || {};

    // sync manager inputs if present
    const ov = state.calcOverrides || {};
    const corpSheetPrice = num(ov.corpSheetPrice, preset.corpSheetPrice);
    const corpWaste      = num(ov.corpWaste, preset.corpWaste);
    const facadeM2Price  = num(ov.facadeM2Price, preset.facadeM2Price);
    const facadeWaste    = num(ov.facadeWaste, preset.facadeWaste);
    const servicesPct    = num(ov.servicesPct, preset.servicesPct);

    // STEP 7 uses data-comfort="econom"; allow both keys.
    const comfortRaw = state.comfortKit || state.comfort || pack || "standard";
    const comfortKey = (comfortRaw === "econom") ? "econ" : comfortRaw;
    const hardwarePct = num(ov.hardwarePct, (CALC.hardwarePctByComfort && (CALC.hardwarePctByComfort[comfortKey])) ?? 0.10);

    const backType = preset.backType || "HDF3";
    const backSheetPrice = num(ov.backSheetPrice, preset.backSheetPrice ?? 0);
    const backWaste = num(ov.backWaste, preset.backWaste ?? 1.05);

    const topOn = bool(ov.topOn, preset.topOn ?? true);
    const topPerM = num(ov.topPerM, preset.topPerM ?? 2500);
    const topDepth = num(ov.topDepth, preset.topDepth ?? 600);
    const bspOn = bool(ov.bspOn, preset.bspOn ?? true);
    const bspPerM2 = num(ov.bspPerM2, preset.bspPerM2 ?? 1800);
    const bspH = num(ov.bspH, preset.bspH ?? 600);

    // IMPORTANT: include countertop/backsplash params in the returned object,
    // otherwise they will be `undefined` in the main calc and cost will stay 0.
    return {
        pack,
        comfort: comfortKey,
        corpSheetPrice,
        corpWaste,
        facadeM2Price,
        facadeWaste,
        backType,
        backSheetPrice,
        backWaste,
        servicesPct,
        hardwarePct,
        topOn,
        topPerM,
        topDepth,
        bspOn,
        bspPerM2,
        bspH
    };
}

/* --- 4) Main calc --- */

function getTallUnitsWidth(state) {
    let width = 0;

    if (state.appliances?.fridgeColumn) {
        width += 600;
    }

    if (state.appliances?.ovenColumn) {
        width += 600;
    }

    return width;
}

function calcRunMm(){
    const d = state.dims || {};
    const A = Number(d.A||0);
    const B = Number(d.B||0);
    const C = Number(d.C||0);
    const layout = state.layout || "straight";

    // Tech flags (STEP 4). In current UI fridge-column is stored as state.tech.fridge === true
    const t = state.tech || {};
    const hasFridgeColumn = !!(t.fridge || t.fridgeColumn || t.fridge_col || t.fridgeColumnEnabled);

    const COL_MM = 600; // MVP: 1 колонна = 600 мм
    const subMm = hasFridgeColumn ? COL_MM : 0;

    // Normalize layout aliases
    const L = (layout === "line") ? "straight" : layout;

    let run = 0;
    if (L === "corner") run = A + B;
    else if (L === "u") run = A + B;        // MVP: A+B
    else if (L === "parallel") run = A;     // MVP
    else run = A;                           // straight

    return Math.max(0, run - subMm);
}


function kcResolveModulesForCalc(state){
    const st = state || window.KC_STATE || {};
    // 1) Prefer modules already stored in state (from Step4)
    if (Array.isArray(st.modules) && st.modules.length) return st.modules;

    // 2) If Step4 engine is present — compute fresh payload and use payload.modules
    if (window.KC_STEP4 && typeof window.KC_STEP4.calcModulesRules === "function") {
        try {
            const payload = window.KC_STEP4.calcModulesRules(st);
            if (payload && Array.isArray(payload.modules) && payload.modules.length) return payload.modules;
        } catch (e) {}
    }

    // 3) Legacy fallback (very limited: straight line only)
    try {
        const legacy = kcGenerateModules();
        if (Array.isArray(legacy) && legacy.length) return legacy;
    } catch (e) {}

    return [];
}

function calcKitchen(){
    const st = (typeof window.kcGetState === "function") ? window.kcGetState() : (window.KC_STATE || {});
    const state = st;
    const modset = kcResolveModulesForCalc(st);
    const areas = kcComputeAreas(modset);
    state.modules = modset;
    state.areas = areas;

    // keep for Step8/spec (so Step8 doesn't depend on Step4 UI rendering)
    if (typeof window.kcSetState === "function") {
        window.kcSetState({ modules: modset, areas }, "core:calcKitchen");
    } else {
        window.KC_STATE = Object.assign(window.KC_STATE || {}, { modules: modset, areas });
    }
    try {
        window.dispatchEvent(new CustomEvent("KC_AREAS_UPDATED", { detail: areas }));
    } catch(e) {}

    const p = getCalcParams();

    const corpNeedM2 = areas.corpM2 * p.corpWaste;
    const sheets = corpNeedM2 / sheetAreaM2();
    const corpCost = sheets * p.corpSheetPrice;

    const facadeNeedM2 = areas.facadeM2 * p.facadeWaste;
    const facadeCost = facadeNeedM2 * p.facadeM2Price;

    const backNeedM2 = (areas.backM2 || 0) * p.backWaste;
    const backSheets = backNeedM2 / sheetAreaM2();
    const backCost = backSheets * p.backSheetPrice;

    // Hardware and services as % of materials (MVP)
    const materials = corpCost + facadeCost + backCost;
    const hardwareCost = materials * p.hardwarePct;
    const servicesCost = materials * p.servicesPct;

    // Countertop / backsplash: optional (MVP: 0 by default)
    const runMm = calcRunMm();
    const runM = Math.max(0, runMm) / 1000;
    const topDepthM = (p.topDepth || 600) / 1000;
    const topCost = p.topOn ? (runM * (p.topPerM || 0)) : 0;
    const splashAreaM2 = runM * ((p.bspH || 600) / 1000);
    const splashCost = p.bspOn ? (splashAreaM2 * (p.bspPerM2 || 0)) : 0;
    const grand = materials + hardwareCost + servicesCost + topCost + splashCost;

    // Manager rows (very light BOM v1)
    const bom = [
        { code:"CORP-CHIP", name:"Корпус (ДСП)", unit:"лист", qty: sheets, price: p.corpSheetPrice, sum: corpCost, note:`m²=${areas.corpM2.toFixed(2)} × waste ${p.corpWaste} = ${corpNeedM2.toFixed(2)}<br/>• боковини: ${(areas.corpSidesM2||0).toFixed(2)} м²<br/>• дно/кришка: ${(areas.corpBottomTopM2||0).toFixed(2)} м²<br/>• полиці: ${(areas.corpShelvesM2||0).toFixed(2)} м²<br/>листів екв.: ${sheets.toFixed(2)} · до закупки: ${Math.ceil(sheets)}` },
        { code:`BACK-${p.backType}`, name:`Задня стінка (${p.backType==="HDF3"?"HDF 3 мм":"ДСП 10 мм"})`, unit:"лист", qty: backSheets, price:p.backSheetPrice, sum: backCost, note:`m²=${(areas.backM2||0).toFixed(2)} × waste ${p.backWaste} = ${backNeedM2.toFixed(2)}<br/>лист.кв.: ${backSheets.toFixed(2)} · до закупки: ${Math.ceil(backSheets)}` },
        { code:"FACADE", name:"Фасади", unit:"м²", qty: facadeNeedM2, price: p.facadeM2Price, sum: facadeCost, note:`m²=${areas.facadeM2.toFixed(2)} × waste ${p.facadeWaste}` },
        { code:"WORKTOP", name:"Стільниця", unit:"м.п.", qty: (p.topOn?runM:0), price: p.topPerM, sum: topCost, note:`довжина=${runM.toFixed(2)} м, глибина=${(p.topDepth||600)} мм` },
        { code:"BACKSPLASH", name:"Фартух", unit:"м²", qty: (p.bspOn?splashAreaM2:0), price: p.bspPerM2, sum: splashCost, note:`площа=${splashAreaM2.toFixed(2)} м², висота=${(p.bspH||600)} мм` },
        { code:"HARDWARE", name:`Фурнітура (Комфорт: ${prettyComfort(p.comfort)})`, unit:"%", qty: p.hardwarePct, price: materials, sum: hardwareCost, note:"% від матеріалів" },
        { code:"SERV", name:`Послуги (Пакет: ${prettyPack(p.pack)})`, unit:"%", qty: p.servicesPct, price: materials, sum: servicesCost, note:"% від матеріалів" }
    ];

    return { modset, areas, params: p, totals: { corpCost, backCost, backSheets, facadeCost, hardwareCost, servicesCost, topCost, topLenM: runM, splashCost, bspM2: splashAreaM2, grand }, bom };
}

/* --- 5) Render --- */
function renderClientCalc(res){
    const t = res.totals;

    // Клієнтський режим: показуємо ТІЛЬКИ "Разом", а нижче — коротко що включено (без цифр по складових).
    setText("calcGrandTotal", fmtUAH(num(t.grand, num(t.total,0))));

    const parts = [];
    if (num(t.corpCost,0)   > 0) parts.push("Корпус");
    if (num(t.backCost,0)   > 0) parts.push("Задня стінка");
    if (num(t.facadeCost,0) > 0) parts.push("Фасади");
    if (num(t.topCost,0)    > 0) parts.push("Стільниця");
    if (num(t.splashCost,0) > 0) parts.push("Фартух");
    if (num(t.hardwareCost,0)>0) parts.push("Фурнітура");
    if (num(t.servicesCost,0)>0) parts.push("Послуги");

    const table = document.getElementById("calcClientTable");
    if (!table) return;

    const note = parts.length
        ? `У "Разом" включено: ${esc(parts.join(", "))}.`
        : `У "Разом" включено обрані матеріали та послуги.`;

    table.innerHTML = `<div class="muted tiny">${note}</div>`;
}

function renderManagerCalc(res){
    const wrap = document.getElementById("calcManagerTable");
    if (!wrap) return;

    const head = `
    <div style="display:grid; grid-template-columns: 120px 1fr 70px 90px 110px; gap:8px; padding:8px 0; border-bottom:1px solid rgba(255,255,255,.08);">
      <div class="tiny">Код</div><div class="tiny">Назва</div><div class="tiny">Од.</div><div class="tiny">К-сть</div><div class="tiny">Сума</div>
    </div>`;
    const body = res.bom.map(x => `
    <div style="display:grid; grid-template-columns: 120px 1fr 70px 90px 110px; gap:8px; padding:8px 0; border-bottom:1px solid rgba(255,255,255,.06);">
      <div class="tiny">${x.code}</div>
      <div>
        <div style="font-weight:700;">${x.name}</div>
        <div class="tiny" style="opacity:.75;">${x.note || ""}</div>
      </div>
      <div class="tiny">${x.unit}</div>
      <div class="tiny">${(x.qty||0).toFixed(2)}</div>
      <div style="font-weight:800;">${fmtUAH(x.sum)}</div>
    </div>
  `).join("");

    // modules mini list
    const mods = res.modset.base || [];
    const modLine = mods.map(m => `${m.type}:${m.w}`).join(", ");
    const meta = res.modset.meta || {};

    const detailsOn = !!(document.getElementById("mgrDetailsToggle") && document.getElementById("mgrDetailsToggle").checked);
    let detailsBlock = "";
    if (detailsOn){
        const a = res.areas || {};
        const p = res.params || {};
        const sheetA = sheetAreaM2();

        const corpNeedM2 = (a.corpM2||0) * (p.corpWaste||1);
        const corpSheetsEq = corpNeedM2 / sheetA;
        const corpSheetsBuy = Math.ceil(corpSheetsEq - 1e-9);

        const backNeedM2 = (a.backM2||0) * (p.backWaste||1);
        const backSheetsEq = backNeedM2 / sheetA;
        const backSheetsBuy = Math.ceil(backSheetsEq - 1e-9);

        const facadeNeedM2 = (a.facadeM2||0) * (p.facadeWaste||1);

        detailsBlock = `
      <div class="hr" style="margin:10px 0;"></div>
      <div class="tiny" style="opacity:.9; margin-bottom:6px;">Деталізація площ (MVP)</div>
      <div class="calc-spec" style="display:grid; gap:6px;">
        <div class="calc-row" style="display:flex; justify-content:space-between; gap:12px;">
          <div>
            <div style="font-weight:700;">Корпус: площі</div>
            <div class="tiny" style="opacity:.75;">Боковини ${((a.corpSidesM2||0)).toFixed(2)} м² · Дно/кришка ${((a.corpBottomTopM2||0)).toFixed(2)} м² · Полиці ${((a.corpShelvesM2||0)).toFixed(2)} м²</div>
            <div class="tiny" style="opacity:.75;">Разом raw ${(a.corpM2||0).toFixed(2)} м² → з відходами ${(corpNeedM2).toFixed(2)} м²</div>
            <div class="tiny" style="opacity:.75;">Листи екв. ${corpSheetsEq.toFixed(2)} · До закупки ${corpSheetsBuy}</div>
          </div>
        </div>

        <div class="calc-row" style="display:flex; justify-content:space-between; gap:12px;">
          <div>
            <div style="font-weight:700;">Фасади: площа</div>
            <div class="tiny" style="opacity:.75;">Raw ${(a.facadeM2||0).toFixed(2)} м² → з відходами ${(facadeNeedM2).toFixed(2)} м²</div>
          </div>
        </div>

        <div class="calc-row" style="display:flex; justify-content:space-between; gap:12px;">
          <div>
            <div style="font-weight:700;">Задня стінка: площа</div>
            <div class="tiny" style="opacity:.75;">Raw ${(a.backM2||0).toFixed(2)} м² → з відходами ${(backNeedM2).toFixed(2)} м²</div>
            <div class="tiny" style="opacity:.75;">Листи екв. ${backSheetsEq.toFixed(2)} · До закупки ${backSheetsBuy}</div>
          </div>
        </div>
      </div>
    `;
    }

    wrap.innerHTML = `
    <div class="tiny" style="opacity:.85; margin-bottom:8px;">
      Модулі (MVP): ${modLine || "—"}
      ${meta.layout==="corner" ? `<br/>Кутова: A=${meta.A} (rem ${meta.remA}), B=${meta.B} (rem ${meta.remB}), кут ${meta.corner}` : `<br/>Пряма: A=${meta.A} (rem ${meta.remA ?? meta.rem ?? 0})`}
    </div>
    ${detailsBlock}
    ${head}
    ${body}
    <div style="display:flex; justify-content:space-between; padding-top:10px;">
      <div class="tiny">Разом</div>
      <div style="font-weight:900;">${fmtUAH(res.totals.grand)}</div>
    </div>
  `;
}

/* --- 6) Wire UI --- */
function calcSetMode(mode){
    CALC.mode = mode;

    // layout mode (affects .split columns)
    document.body.classList.toggle("manager-mode", mode === "manager");
    document.body.classList.toggle("client-mode", mode === "client");
    const clientBtn = document.getElementById("calcModeClientBtn");
    const mgrBtn = document.getElementById("calcModeManagerBtn");
    const vClient = document.getElementById("calcClientView");
    const vMgr = document.getElementById("calcManagerView");

    if (mode === "manager"){
        if (mgrBtn) mgrBtn.style.opacity = "1";
        if (clientBtn) clientBtn.style.opacity = ".7";
        if (vMgr) vMgr.style.display = "";
        if (vClient) vClient.style.display = "none";
    } else {
        if (clientBtn) clientBtn.style.opacity = "1";
        if (mgrBtn) mgrBtn.style.opacity = ".7";
        if (vClient) vClient.style.display = "";
        if (vMgr) vMgr.style.display = "none";
    }
}

// Alias for readability (matches KC docs / chat)
function setCalcMode(mode){
    calcSetMode(mode);
}
function calcSyncManagerInputsFromState(){
    const p = getCalcParams();
    const setVal = (id, v) => { const el = document.getElementById(id); if (el && (el.value==="" || document.activeElement!==el)) el.value = String(v); };
    setVal("mCorpSheetPrice", p.corpSheetPrice);
    setVal("mCorpWaste", p.corpWaste);
    setVal("mFacadeM2Price", p.facadeM2Price);
    setVal("mFacadeWaste", p.facadeWaste);
    setVal("mBackSheetPrice", p.backSheetPrice);
    setVal("mBackWaste", p.backWaste);
    const setChk = (id, v) => { const el = document.getElementById(id); if (el) el.checked = !!v; };
    setChk("mTopOn", p.topOn);
    setVal("mTopPerM", p.topPerM);
    setVal("mTopDepth", p.topDepth);
    setChk("mBspOn", p.bspOn);
    setVal("mBspPerM2", p.bspPerM2);
    setVal("mBspH", p.bspH);
    setVal("mHardwarePct", p.hardwarePct);
    setVal("mServicesPct", p.servicesPct);
}

// function calcReadManagerInputsToState(){
//     state.calcOverrides = state.calcOverrides || {};
//     const g = id => document.getElementById(id);
//     const set = (k, id) => { const el=g(id); if (el) state.calcOverrides[k] = num(el.value, state.calcOverrides[k]); };
//
//     set("corpSheetPrice","mCorpSheetPrice");
//     set("corpWaste","mCorpWaste");
//     set("facadeM2Price","mFacadeM2Price");
//     set("facadeWaste","mFacadeWaste");
//     set("backSheetPrice","mBackSheetPrice");
//     set("backWaste","mBackWaste");
//     set("hardwarePct","mHardwarePct");
//     set("servicesPct","mServicesPct");
//
//     saveState();
// }

function calcReadManagerInputsToState(){
    state.calcOverrides = state.calcOverrides || {};
    const g = id => document.getElementById(id);

    const setNum = (k, id) => {
        const el = g(id);
        if (!el) return;
        state.calcOverrides[k] = num(el.value, state.calcOverrides[k]);
    };

    const setChk = (k, id) => {
        const el = g(id);
        if (!el) return;
        state.calcOverrides[k] = !!el.checked;
    };

    // корпус / фасади / задня
    setNum("corpSheetPrice","mCorpSheetPrice");
    setNum("corpWaste","mCorpWaste");
    setNum("facadeM2Price","mFacadeM2Price");
    setNum("facadeWaste","mFacadeWaste");
    setNum("backSheetPrice","mBackSheetPrice");
    setNum("backWaste","mBackWaste");

    // ✅ стільниця / фартух (те, що НЕ працювало)
    setChk("topOn","mTopOn");
    setNum("topPerM","mTopPerM");
    setNum("topDepth","mTopDepth");

    setChk("bspOn","mBspOn");
    setNum("bspPerM2","mBspPerM2");
    setNum("bspH","mBspH");

    // %
    setNum("hardwarePct","mHardwarePct");
    setNum("servicesPct","mServicesPct");

    saveState();
}

function calcRecalcAndRender(){
    // Ensure comfort kit exists (required for calc)
    if (!state.comfortKit){
        state.comfortKit = state.package || "standard";
        saveState();
    }
    const res = calcKitchen();
    CALC._lastRes = res;
    renderClientCalc(res);
    renderManagerCalc(res);
    calcSyncManagerInputsFromState();
}

function wireCalc(){
    const cBtn = document.getElementById("calcModeClientBtn");
    const mBtn = document.getElementById("calcModeManagerBtn");
    const rBtn = document.getElementById("recalcBtn");

    if (cBtn) cBtn.addEventListener("click", () => calcSetMode("client"));
    if (mBtn) mBtn.addEventListener("click", () => calcSetMode("manager"));
    if (rBtn) rBtn.addEventListener("click", () => { calcReadManagerInputsToState(); calcRecalcAndRender(); });

    // auto recalc on any key pricing input change (manager)
    [
        "mCorpSheetPrice","mCorpWaste",
        "mFacadeM2Price","mFacadeWaste",
        "mBackSheetPrice","mBackWaste",
        "mHardwarePct","mServicesPct",

        // ✅ додали Step8 пункт 4
        "mTopOn","mTopPerM","mTopDepth",
        "mBspOn","mBspPerM2","mBspH"
    ].forEach(id=>{
        const el = document.getElementById(id);
        if (!el) return;
        const evt = (el.type === "checkbox") ? "change" : "change";
        el.addEventListener(evt, () => { calcReadManagerInputsToState(); calcRecalcAndRender(); });
    });


    // toggle details (manager)
    const dToggle = document.getElementById("mgrDetailsToggle");
    if (dToggle) dToggle.addEventListener("change", () => {
        if (CALC._lastRes) renderManagerCalc(CALC._lastRes);
    });// when entering step 8
    const _show = showStep;
    showStep = function(n){
        _show(n);
        if (n === 8){
            calcSetMode("client");
            calcRecalcAndRender();
        }
    };

    // first render if already on 8
    if (state.step === 8){ calcRecalcAndRender(); }
}

// call wireCalc after existing wires finish
try { wireCalc(); } catch(e){ console.warn("wireCalc failed", e); }



/* =========================
   STEP 1 — STYLE PREVIEW
   works with existing HTML
========================= */

const STYLE_PREVIEW_DATA = {
    modern: {
        title: "Сучасна",
        text: "Чіткі лінії, практичні матеріали, нейтральні фактури. Добре підходить для більшості планувань.",
        img: "images/1.jpg",
        chips: ["рівні фасади", "контраст", "практично"]
    },
    minimal: {
        title: "Мінімал",
        text: "Нічого зайвого. Максимум простоти, світла та чистих форм.",
        img: "images/2.jpg",
        chips: ["мінімум деталей", "чистий вигляд", "легко"]
    },
    classic: {
        title: "Класика",
        text: "Затишок, теплі тони, м’які форми і відчуття дому.",
        img: "images/3.jpg",
        chips: ["затишок", "теплі кольори", "традиційно"]
    },
    loft: {
        title: "Лофт",
        text: "Фактури, темні акценти, метал і контраст.",
        img: "images/4.jpg",
        chips: ["темні акценти", "фактура", "контраст"]
    }
};

document.addEventListener("DOMContentLoaded", () => {
    const img = document.getElementById("stylePreviewImg");
    const title = document.getElementById("stylePreviewTitle");
    const text = document.getElementById("stylePreviewText");
    const chips = document.getElementById("stylePreviewChips");
    const root = document.getElementById("stylePreview");

    if (!img || !title || !text || !chips) {
        console.warn("Style preview elements not found");
        return;
    }

    document.querySelectorAll("#styleCards .card").forEach(card => {
        card.addEventListener("click", () => {
            const key = card.dataset.style;
            const data = STYLE_PREVIEW_DATA[key];
            if (!data) return;

            // update data-style for CSS
            root.dataset.style = key;

            // image
            img.src = data.img;

            // text
            title.textContent = data.title;
            text.textContent = data.text;

            // chips
            chips.innerHTML = "";
            data.chips.forEach(ch => {
                const span = document.createElement("span");
                span.className = "chip";
                span.textContent = ch;
                chips.appendChild(span);
            });

            // active card
            document.querySelectorAll("#styleCards .card")
                .forEach(c => c.classList.remove("active"));
            card.classList.add("active");
        });
    });
});


function wireStyleMiniHover() {
    const minis = document.querySelectorAll('.style-preview__mini .mini');
    if (!minis.length) return;

    minis.forEach(mini => {
        mini.addEventListener('mouseenter', () => {
            minis.forEach(m => m.classList.remove('active'));
            mini.classList.add('active');
        });

        mini.addEventListener('mouseleave', () => {
            mini.classList.remove('active');
        });
    });
}

/* викликаємо після завантаження DOM */
document.addEventListener('DOMContentLoaded', () => {
    wireStyleMiniHover();
    initLayoutCardImages();
});



(function initStyleMiniTooltips(){

    const tipsByStyle = {
        modern: {
            front: "Рівні фасади, матові або напівматові",
            top:   "Нейтральна стільниця (камінь / ламінат)",
            wall:  "Спокійний фартух без активного малюнка"
        },
        minimal: {
            front: "Максимально прості фасади без декору",
            top:   "Світла стільниця, мінімум контрасту",
            wall:  "Однотонний фартух або панель"
        },
        classic: {
            front: "Фасади з рамкою, теплі відтінки",
            top:   "Камінь або дерево з теплим тоном",
            wall:  "Плитка або класичний візерунок"
        },
        loft: {
            front: "Темні або грубі фасади, індустріальний вигляд",
            top:   "Бетон / темний камінь",
            wall:  "Фартух з фактурою або контрастом"
        }
    };

    function applyMiniTips(style){
        document.querySelectorAll('.style-preview__mini .mini')
            .forEach(el=>{
                const key = el.dataset.mini;
                el.setAttribute('data-tip', tipsByStyle[style]?.[key] || '');
            });
    }

    // стартове значення
    applyMiniTips('modern');

    // при кліку на стиль
    document.querySelectorAll('#styleCards .card').forEach(card=>{
        card.addEventListener('click', ()=>{
            applyMiniTips(card.dataset.style);
        });
    });
    // ===== single source of truth for state =====
    (function(){
        window.kcGetState = function(){
            if (window.KC && typeof window.KC.getState === "function") return window.KC.getState();
            return window.KC_STATE || {};
        };
        window.kcSetState = function(patch){
            if (window.KC && typeof window.KC.setState === "function") return window.KC.setState(patch);
            window.KC_STATE = Object.assign(window.KC_STATE || {}, patch);
            return window.KC_STATE;
        };
    })();


})();

// ==============================================================
/* KC compatibility API (required by app.js + step scripts)
   Ensures a single source of truth for state across all steps.
   - State store: window.KC_STATE
   - Public API: window.KC.getState / setState / init
   - Emits 'kc:state' on KC_BUS when state changes

   Fixes: when steps write to KC_STATE but core/modules read via KC.getState().
*/
(function ensureKCCompat(){
    const w = window;

    // small helper
    const isPlain = (v) => v && typeof v === "object" && !Array.isArray(v);

    // default state shape (НЕ перетирає існуючий)
    w.KC_STATE = w.KC_STATE || {
        theme: (localStorage.getItem("KC_THEME") || "dark"),
        dims: { A: 0, B: 0, angle: 90, layout: "line" },
        tech: { fridge:false, dishwasher:false, oven:false, hob:false, hood:false, sink:false },
        dwWidth: 600
    };

    function getState() {
        return w.KC_STATE || {};
    }

    function setState(patch = {}) {
        const prev = w.KC_STATE || {};
        const next = { ...prev };

        Object.keys(patch).forEach((k) => {
            const pv = patch[k];
            if (isPlain(pv) && isPlain(next[k])) next[k] = { ...next[k], ...pv };
            else next[k] = pv;
        });

        w.KC_STATE = next;

        // optional event for observers
        if (w.KC_BUS && typeof w.KC_BUS.dispatchEvent === "function") {
            w.KC_BUS.dispatchEvent(new CustomEvent("kc:state", { detail: { state: next, patch } }));
        }

        return next;
    }

    // create KC only if missing; otherwise extend missing methods
    w.KC = w.KC || {};
    if (typeof w.KC.getState !== "function") w.KC.getState = getState;
    if (typeof w.KC.setState !== "function") w.KC.setState = setState;
    if (typeof w.KC.init    !== "function") w.KC.init = function(){ /* no-op */ };
})();


// ===== SAFE STATE HELPERS (global) =====
window.kcGetStateSafe = function () {
    if (window.KC && typeof window.KC.getState === "function") return window.KC.getState();
    return window.KC_STATE || {};
};

window.kcSetStateSafe = function (patch) {
    if (window.KC && typeof window.KC.setState === "function") return window.KC.setState(patch);
    window.KC_STATE = Object.assign(window.KC_STATE || {}, patch || {});
    return window.KC_STATE;
};

// ===== DOM helpers (global) =====
/**
 * Safe numeric reader from <input> / <select> / any element with value/textContent.
 * Returns `fallback` if empty/NaN.
 */
window.readInputNumber = window.readInputNumber || function readInputNumber(id, fallback) {
    const fb = (fallback === undefined ? 0 : fallback);
    const el = document.getElementById(id);
    if (!el) return fb;

    let raw = ("value" in el ? el.value : el.textContent);
    if (raw == null) return fb;

    // allow "1 200,5" formats
    raw = String(raw).trim().replace(/\s+/g, "").replace(",", ".");
    const n = parseFloat(raw);
    return Number.isFinite(n) ? n : fb;
};

// ===== Tech normalizer (global) =====
/**
 * Unifies different state shapes into ONE tech object expected by STEP4 (modules MVP).
 * Supports legacy keys (appliances, техника, etc.) and normalizes dwWidth.
 * @returns {{tech:{fridge:boolean,dishwasher:boolean,oven:boolean,hob:boolean,hood:boolean,sink:boolean},dwWidth:number}}
 */
window.getTech = window.getTech || function getTech(state) {
    const st = state || window.kcGetStateSafe();
    const t = st.tech || st.appliances || st.appliance || st.техника || {};

    const bool = (v) => v === true || v === 1 || v === "1" || v === "true" || v === "yes" || v === "on";
    const pick = (...keys) => {
        for (const k of keys) {
            if (t && Object.prototype.hasOwnProperty.call(t, k)) return t[k];
            if (st && Object.prototype.hasOwnProperty.call(st, k)) return st[k];
        }
        return undefined;
    };

    const tech = {
        fridge:      bool(pick("fridge", "fridgeColumn", "fridge_col", "holodilnik", "холодильник")),
        dishwasher:  bool(pick("dishwasher", "dw", "pmm", "dishwasherBuiltIn", "пмм", "посудомийка")),
        oven:        bool(pick("oven", "ovenColumn", "духовка")),
        hob:         bool(pick("hob", "cooktop", "варочная", "плита")),
        hood:        bool(pick("hood", "extractor", "вытяжка")),
        sink:        bool(pick("sink", "wash", "мойка", "раковина"))
    };

    // dishwasher width can be on st.dwWidth or t.dwWidth or t.dishwasherWidth etc.
    let dwW = pick("dwWidth", "dishwasherWidth", "pmmWidth", "ширинаПмм");
    if (dwW == null) dwW = st.dwWidth;
    dwW = (typeof dwW === "number") ? dwW : parseInt(String(dwW || "600"), 10);
    if (!Number.isFinite(dwW) || dwW <= 0) dwW = 600;

    return { tech, dwWidth: dwW };
};


/* ============================================================
   KC STATE STORE + MODULES MVP (required for STEP4)
   Paste this block at the VERY END of core.js
============================================================ */
(function () {
    "use strict";

    // ---------- 1) State store ----------
    window.KC_STATE = window.KC_STATE || {
        layout: "single", // "single" | "l"
        dims: { A: 0, B: 0, angle: 90 },
        tech: { fridge: false, dishwasher: false, oven: false, hob: false, hood: false, sink: false },
        dwWidth: 600
    };

    window.KC = window.KC || {};

    function isObj(v) { return v && typeof v === "object" && !Array.isArray(v); }

    function deepMerge(target, patch) {
        const out = Object.assign({}, target);
        Object.keys(patch || {}).forEach((k) => {
            const pv = patch[k];
            const tv = out[k];
            if (isObj(tv) && isObj(pv)) out[k] = deepMerge(tv, pv);
            else out[k] = pv;
        });
        return out;
    }

    window.KC.getState = window.KC.getState || function () {
        return window.KC_STATE || {};
    };

    window.KC.setState = window.KC.setState || function (patch) {
        window.KC_STATE = deepMerge(window.KC_STATE || {}, patch || {});
        try { localStorage.setItem("KC_STATE_V1", JSON.stringify(window.KC_STATE)); } catch (e) {}
        try { window.dispatchEvent(new CustomEvent("kc:state", { detail: window.KC_STATE })); } catch (e) {}
        return window.KC_STATE;
    };

    // helpers for engines/old code
    window.kcGetStateSafe = window.kcGetStateSafe || function () {
        if (window.KC && typeof window.KC.getState === "function") return window.KC.getState();
        return window.KC_STATE || {};
    };

    window.kcSetStateSafe = window.kcSetStateSafe || function (patch) {
        if (window.KC && typeof window.KC.setState === "function") return window.KC.setState(patch);
        window.KC_STATE = deepMerge(window.KC_STATE || {}, patch || {});
        return window.KC_STATE;
    };

    // restore from localStorage once
    (function restoreKCStateOnce() {
        if (window.__KC_RESTORED__) return;
        window.__KC_RESTORED__ = true;
        try {
            const raw = localStorage.getItem("KC_STATE_V1");
            if (!raw) return;
            const parsed = JSON.parse(raw);
            if (parsed && typeof parsed === "object") window.KC_STATE = deepMerge(window.KC_STATE, parsed);
        } catch (e) {}
    })();

    // ---------- 2) Modules MVP generator ----------
    function num(v) {
        const x = Number(v);
        return Number.isFinite(x) ? x : 0;
    }

    // ⬇️⬇️⬇️ ВСТАВИТИ СЮДИ ⬇️⬇️⬇️
    
// =======================
// STEP 8 — SPEC (MVP)
// =======================
// В Step 8 ми підтягуємо "площі" з модулів (STEP4) і переводимо їх у:
// 1) м² (для фасадів)
// 2) еквівалент листів ДСП / HDF (через площу листа + waste)
// IMPORTANT: модулі можуть містити width або w; height/h; depth/d; shelves/shelvesCount.

    if (window.KC_STEP8_LOADED) {
        // Step8 already refactored into js/step8.js
        return;
    }

 function kcGenerateModules(){
        const s = state || {};
        const rawLayout = s.layout || "line";

        // нормалізація layout (у нас бувають різні назви з UI)
        const layout = (rawLayout === "straight" || rawLayout === "single" || rawLayout === "line") ? "line" : rawLayout;

        const A = num(s.dims?.A, 0);

        // helpers
        const clampDW = (w) => {
            const n = Math.round(num(w, 600));
            if (n === 450 || n === 600 || n === 800) return n;
            return 600;
        };

        // SAFE fallback, якщо щось не задано
        const fallback = () => ({
            base: [],
            upper: [],
            meta: { layout, A, usedReq:0, rem:0, filledLeft:0, note:"fallback-empty" }
        });

        // Поки калібруємо тільки "line"
        if (layout !== "line" || A <= 0) return fallback();

        const tech = s.tech || {};
        const req = [];

        // 1) Холодильник-колона (600)
        const hasFridge =
            !!tech.fridge ||
            !!tech.fridgeColumn ||
            !!tech.fridge_column ||
            !!tech["fridge-column"];

        if (hasFridge) req.push({ type:"column", w:600, facades:2 });

        // 2) Посудомийна (450/600/800)

        if (tech.dishwasher){
            // ПММ може прийти з різних ключів (старі/нові версії кроку 4)
            const dw = num(
                tech.dishwasherWidth ?? tech.dwWidth ?? tech.dw ?? tech.dishwasher_w,
                600
            ) || 600;

            req.push({ type:"dishwasher", w:dw, facades:1 });
        }


        // 3) Мийка (600)
        if (tech.sink) req.push({ type:"sink", w:600, facades:2 });

        // 4) Плита/духовка (600)
        if (tech.hob || tech.oven) req.push({ type:"cooking", w:600, facades:2 });

        // Скільки вже зайнято "обовʼязковими"
        const usedReq = req.reduce((a,m)=>a+num(m.w,0),0);
        const overflowMm = Math.max(0, usedReq - A);
        let rem = Math.max(0, A - usedReq); // може бути <0 якщо A маленьке — це ок, покажемо в meta

        // Якщо обов'язкові модулі не влазять у стіну — повертаємо req як є,
        // але відмічаємо overflow, щоб UI показав попередження.
        if (usedReq > A){
            return {
                base: req,
                upper: [],
                meta: { layout, A, usedReq, rem, filledLeft: 0, overflow: usedReq - A }
            };
        }


        // добивка стандартними тумбами
        const OPTS = [800, 600, 450, 400, 300];

        function fillWidths(target){
            if (target <= 0) return { widths: [], sum: 0, left: target };

            const maxT = Math.min(10000, Math.round(target));
            const dp = Array(maxT+1).fill(null);
            dp[0] = [];

            for (let t=0; t<=maxT; t++){
                if (!dp[t]) continue;
                for (const w of OPTS){
                    const nt = t + w;
                    if (nt > maxT) continue;
                    const cand = dp[t].concat([w]);
                    if (!dp[nt] || cand.length < dp[nt].length) dp[nt] = cand;
                }
            }

            let best = null, bestSum = 0, bestLeft = Infinity, bestLen = Infinity;
            for (let sum=0; sum<=maxT; sum++){
                if (!dp[sum]) continue;
                const left = target - sum;
                if (left < 0) continue;
                const len = dp[sum].length;
                if (left < bestLeft || (left === bestLeft && len < bestLen)){
                    best = dp[sum];
                    bestSum = sum;
                    bestLeft = left;
                    bestLen = len;
                }
            }
            return { widths: best || [], sum: bestSum, left: bestLeft };
        }

        const filled = fillWidths(rem);
        const fillers = (filled.widths || []).map(w => ({
            type: "base",
            w,
            facades: (w >= 700 ? 2 : (w >= 450 ? 2 : 1))
        }));

        const base = req.concat(fillers);

        // Верхні модулі — дзеркалимо базу, але:
        // - НЕ робимо верх над колонною
        // - НЕ робимо верх над посудомийкою
        const upper = [];
        const wantUpper = (s.step3Customized !== false);
        if (wantUpper){
            base.forEach(m => {
                if (m.type === "column") return;
                if (m.type === "dishwasher") return;
                upper.push({
                    type:"upper",
                    w:m.w,
                    facades:(m.w >= 700 ? 2 : (m.w >= 450 ? 2 : 1))
                });
            });

            // Витяжка: гарантуємо хоча б один верх 600 (MVP)
            if (tech.hood && !upper.some(u => num(u.w,0) === 600)){
                upper.push({ type:"upper", w:600, facades:2, note:"hood" });
            }
        }

        return {
            base,
            upper,
            meta: {
                layout,
                A,
                usedReq,
                rem,
                filledLeft: filled.left,
                overflowMm,
                fits: overflowMm === 0
            }
        };
    }

function kcCalcAreasFromModules(modules, opts = {}) {
  const state = window.KC_STATE || {};
  const meta = (state.meta && typeof state.meta === "object") ? state.meta : {};

  const mm2 = (a, b) => Math.max(0, Number(a) || 0) * Math.max(0, Number(b) || 0);
  const mm2_to_m2 = (v) => (Number(v) || 0) / 1_000_000;

  const baseH  = Number(opts.baseH  ?? meta.baseH  ?? 830);   // мм (МVP)
  const upperH = Number(opts.upperH ?? meta.upperH ?? 720);   // мм
  const tallH  = Number(opts.tallH  ?? meta.tallH  ?? 2300);  // мм
  const baseD  = Number(opts.baseD  ?? meta.baseD  ?? 560);   // мм
  const upperD = Number(opts.upperD ?? meta.upperD ?? 320);   // мм
  const tallD  = Number(opts.tallD  ?? meta.tallD  ?? 560);   // мм

  // Площа одного листа (для еквіваленту)
  const chipSheetW = Number(opts.chipSheetW ?? meta.chipSheetW ?? 2800);
  const chipSheetH = Number(opts.chipSheetH ?? meta.chipSheetH ?? 2070);
  const hdfSheetW  = Number(opts.hdfSheetW  ?? meta.hdfSheetW  ?? 2800);
  const hdfSheetH  = Number(opts.hdfSheetH  ?? meta.hdfSheetH  ?? 2070);

  const chipSheetAreaM2 = mm2_to_m2(mm2(chipSheetW, chipSheetH)) || 1;
  const hdfSheetAreaM2  = mm2_to_m2(mm2(hdfSheetW,  hdfSheetH))  || 1;

  // Waste factors (можна міняти пізніше в Step 6/7)
  const chipWaste = (function wasteFactor(v, def){
    const n = Number(v);
    return (Number.isFinite(n) && n >= 1) ? n : def;
  })(opts.chipWaste ?? meta.chipWaste, 1.15);
  const hdfWaste  = (function wasteFactor(v, def){
    const n = Number(v);
    return (Number.isFinite(n) && n >= 1) ? n : def;
  })(opts.hdfWaste ?? meta.hdfWaste, 1.05);

  let corpSidesMM2 = 0;
  let corpTBMM2    = 0;
  let shelvesMM2   = 0;
  let backMM2      = 0;
  let facadeMM2    = 0;

  (modules || []).forEach((m) => {
    if (!m) return;

    const type = (m.type || m.role || "").toString().toLowerCase();

    const W = Number(m.width ?? m.w ?? m.W ?? 0);
    const H = Number(m.height ?? m.h ?? m.H ?? 0);
    const D = Number(m.depth ?? m.d ?? m.D ?? 0);

    // Якщо Step4 не віддав глибину/висоту — беремо дефолт по типу
    let useH = H;
    let useD = D;

    if (!useH) {
      if (type.includes("upper")) useH = upperH;
      else if (type.includes("tall") || type.includes("fridge")) useH = tallH;
      else useH = baseH;
    }
    if (!useD) {
      if (type.includes("upper")) useD = upperD;
      else if (type.includes("tall") || type.includes("fridge")) useD = tallD;
      else useD = baseD;
    }

    // Корисна ширина
    const useW = W;

    if (!useW) return;

    // Корпус: боковини + дно/кришка
    corpSidesMM2 += 2 * mm2(useH, useD);
    corpTBMM2    += 2 * mm2(useW, useD);

    // Полки: якщо є shelves / shelvesCount — беремо; інакше 1 полиця для base, 2 для tall, 0 для upper (MVP)
    const shelvesCount = Number(m.shelves ?? m.shelvesCount ?? (
      type.includes("tall") ? 2 :
      type.includes("upper") ? 0 : 1
    ));
    if (shelvesCount > 0) shelvesMM2 += shelvesCount * mm2(useW, useD);

    // Задня стінка (HDF): ширина × висота
    backMM2 += mm2(useW, useH);

    // Фасади (MVP): ширина × висота (можна деталізувати з Step5)
    facadeMM2 += mm2(useW, useH);
  });

  const corpRawM2   = mm2_to_m2(corpSidesMM2 + corpTBMM2 + shelvesMM2);
  const backRawM2   = mm2_to_m2(backMM2);
  const facadeRawM2 = mm2_to_m2(facadeMM2);

  const corpWithWasteM2   = corpRawM2   * chipWaste;
  const backWithWasteM2   = backRawM2   * hdfWaste;
  const facadeWithWasteM2 = facadeRawM2; // фасади в MVP без waste (можна додати пізніше)

  const corpSheetsEq = corpWithWasteM2 / chipSheetAreaM2;
  const backSheetsEq = backWithWasteM2 / hdfSheetAreaM2;

  const corpSheetsBuy = Math.ceil(Math.max(0, corpSheetsEq));
  const backSheetsBuy = Math.ceil(Math.max(0, backSheetsEq));

  return {
    meta: { baseH, upperH, tallH, baseD, upperD, tallD, chipWaste, hdfWaste, chipSheetAreaM2, hdfSheetAreaM2 },
    corp: {
      sidesM2: mm2_to_m2(corpSidesMM2),
      topBottomM2: mm2_to_m2(corpTBMM2),
      shelvesM2: mm2_to_m2(shelvesMM2),
      rawM2: corpRawM2,
      withWasteM2: corpWithWasteM2,
      sheetsEq: corpSheetsEq,
      sheetsBuy: corpSheetsBuy
    },
    back: {
      rawM2: backRawM2,
      withWasteM2: backWithWasteM2,
      sheetsEq: backSheetsEq,
      sheetsBuy: backSheetsBuy
    },
    facade: {
      rawM2: facadeRawM2,
      withWasteM2: facadeWithWasteM2
    }
  };
}

    function kcNormalizeAreas(a) {
        if (!a || typeof a !== "object") return a;

        // 1) Если пришел НОВЫЙ формат (meta/corp/back/facade) — добавим legacy-поля
        if (a.corp && typeof a.corp === "object") {
            a.corpM2 = Number(a.corp.rawM2 || 0);
            a.corpSidesM2 = Number(a.corp.sidesM2 || 0);
            a.corpBottomTopM2 = Number(a.corp.topBottomM2 || 0);
            a.corpShelvesM2 = Number(a.corp.shelvesM2 || 0);

            a.backM2 = Number(a.back?.rawM2 || 0);
            a.backSheetsEq = Number(a.back?.sheetsEq || 0);
            a.backSheetsBuy = Number(a.back?.sheetsBuy || 0);

            a.facadeM2 = Number(a.facade?.rawM2 || 0);

            a.corpSheetsEq = Number(a.corp?.sheetsEq || 0);
            a.corpSheetsBuy = Number(a.corp?.sheetsBuy || 0);

            return a;
        }

        // 2) Если пришел СТАРЫЙ плоский формат — соберем вложенный
        if (!a.corp && ("corpM2" in a || "backM2" in a || "facadeM2" in a)) {
            const meta = a.meta || {};
            a.meta = meta;

            a.corp = {
                sidesM2: Number(a.corpSidesM2 || 0),
                topBottomM2: Number(a.corpBottomTopM2 || 0),
                shelvesM2: Number(a.corpShelvesM2 || 0),
                rawM2: Number(a.corpM2 || 0),
                withWasteM2: Number(a.corpWithWasteM2 || 0),
                sheetsEq: Number(a.corpSheetsEq || 0),
                sheetsBuy: Number(a.corpSheetsBuy || 0),
            };
            a.back = {
                rawM2: Number(a.backM2 || 0),
                withWasteM2: Number(a.backWithWasteM2 || 0),
                sheetsEq: Number(a.backSheetsEq || 0),
                sheetsBuy: Number(a.backSheetsBuy || 0),
            };
            a.facade = {
                rawM2: Number(a.facadeM2 || 0),
                withWasteM2: Number(a.facadeWithWasteM2 || 0),
            };
            return a;
        }

        return a;
    }


function kcRecalcStep8(modules) {
  const state = window.KC_STATE || {};
  const mods = Array.isArray(modules) ? modules : (Array.isArray(state.modules) ? state.modules : []);

    const areas = kcCalcAreasFromModules(mods, {});
    kcNormalizeAreas(areas);
    state.areas = areas;

    // Зберігаємо для UI
  state.areas = areas;
  window.KC_STATE = state;



    // Підсвітити "Деталізація площ" якщо є блоки
  try {
    if (typeof window.kcRenderAreasDetails === "function") window.kcRenderAreasDetails(areas);
  } catch (e) {}

  // Оновити специфікацію (рядки CORP-CHIP / BACK-HDF3 / FACADE) — якщо є render у core
  try {
    if (typeof window.kcUpdateSpecFromAreas === "function") {
      window.kcUpdateSpecFromAreas(areas);
    } else if (typeof window.kcRenderSpec === "function") {
      window.kcRenderSpec(); // якщо render сам читає KC_STATE.areas
    }
  } catch (e) {}

  return areas;
}

// Глобальні експорти — щоб ти міг викликати з консолі
window.kcCalcAreasFromModules = kcCalcAreasFromModules;
window.kcRecalcStep8 = kcRecalcStep8;

// Авто-оновлення Step8 при зміні стану (STEP4 → modules)
(function wireStep8AutoRecalc(){
  if (window.__KC_STEP8_WIRED__) return;
  window.__KC_STEP8_WIRED__ = true;

  window.addEventListener("KC_STATE_CHANGED", (ev) => {
    const st = ev && ev.detail ? ev.detail : window.KC_STATE;
    if (st && Array.isArray(st.modules) && st.modules.length) {
      kcRecalcStep8(st.modules);
    }
  });

  // На старті теж спробуємо, якщо модулі вже є
  if (window.KC_STATE && Array.isArray(window.KC_STATE.modules) && window.KC_STATE.modules.length) {
    kcRecalcStep8(window.KC_STATE.modules);
  }
})();

function kcUpdateAreasFromModules() {
        if (!window.KC_STATE?.modules?.length) {
            console.warn("⚠ kcUpdateAreasFromModules: no modules");
            return;
        }

        const areas = kcCalcAreasFromModules(window.KC_STATE.modules);

        window.KC_STATE.areas = areas;

        window.dispatchEvent(
            new CustomEvent("KC_AREAS_UPDATED", { detail: areas })
        );

       return areas;
    }

    kcGenerateModules();
    kcRecalcStep8();
    kcUpdateAreasFromModules();

// ⬆️⬆️⬆️ КІНЕЦЬ ВСТАВКИ ⬆️⬆️⬆️

    function getA(st) { return num(st?.dims?.A ?? st?.A ?? 0); }
    function getB(st) { return num(st?.dims?.B ?? st?.B ?? 0); }

    function techShape(st) {
        const tech = Object.assign(
            { fridge:false, dishwasher:false, oven:false, hob:false, hood:false, sink:false },
            st?.tech || {}
        );
        const dwWidth = num(st?.dwWidth ?? 600) || 600;
        return { tech, dwWidth };
    }

    // MVP: single-wall packing. (For L-shaped пока считаем по A как базу, не ломаем UI)
    window.kcGenerateModules = window.kcGenerateModules || function () {
        const st = window.kcGetStateSafe();
        const A = getA(st);
        const B = getB(st);
        const layout = st?.layout || "single";
        const { tech, dwWidth } = techShape(st);

        const meta = { A, B, layout, baseH: 830, upperH: 720, tallH: 2300 };

        const base = [];
        const upper = [];
        const tall = [];

        if (!A) {
            return { base, upper, tall, meta: Object.assign(meta, { debug: "A=0" }) };
        }

        let remaining = A;

        // fridge column: base footprint + tall column
        if (tech.fridge) {
            base.push({ type: "column", w: 600, h: meta.baseH });
            tall.push({ type: "column", w: 600, h: meta.tallH });
            remaining -= 600;
        }

        // required base modules
        if (tech.dishwasher) { base.push({ type: "dishwasher", w: dwWidth, h: meta.baseH }); remaining -= dwWidth; }
        if (tech.sink)       { base.push({ type: "sink", w: 600, h: meta.baseH }); remaining -= 600; }
        if (tech.hob || tech.oven) { base.push({ type: "cooking", w: 600, h: meta.baseH }); remaining -= 600; }

        // if no tech chosen => still build cabinets (so корпус/верх есть)
        if (!tech.fridge && !tech.dishwasher && !tech.sink && !tech.hob && !tech.oven) {
            // give a sane default: 2×600 + 1×800 then fill
            base.push({ type: "base", w: 600, h: meta.baseH }); remaining -= 600;
            base.push({ type: "base", w: 600, h: meta.baseH }); remaining -= 600;
            base.push({ type: "base", w: 800, h: meta.baseH }); remaining -= 800;
        }

        if (remaining < 0) remaining = 0;

        // fillers
        const fillSizes = [800, 600, 450, 400, 300];
        while (remaining >= 300) {
            const next = fillSizes.find(w => w <= remaining);
            if (!next) break;
            base.push({ type: "base", w: next, h: meta.baseH });
            remaining -= next;
        }

        // upper: mirror base except column/dishwasher
        base.forEach((m) => {
            if (m.type === "dishwasher") return;
            if (m.type === "column") return;
            upper.push({ type: "upper", w: m.w, h: meta.upperH });
        });

        const baseSum = base.reduce((s,m)=>s+(m.w||0),0);
        const upperSum = upper.reduce((s,m)=>s+(m.w||0),0);
        const tallSum = tall.reduce((s,m)=>s+(m.w||0),0);

        return {
            base, upper, tall,
            meta: Object.assign(meta, {
                remaining,
                baseSum, upperSum, tallSum,
                debug: `A=${A} base=${baseSum} upper=${upperSum} tall=${tallSum} rem=${remaining}`
            })
        };
    };

    window.kcCalcAreasFromModules = kcCalcAreasFromModules;
})();

// Debug exports
window.kcComputeAreas = kcComputeAreas;
window.calcKitchen = calcKitchen;
